"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[314,843,495,886],{7158:(e,t,a)=>{a.d(t,{Z:()=>n});var o=a(3645),r=a.n(o)()((function(e){return e[1]}));r.push([e.id,"tr.p-highlight{background:rgba(100,181,246,.5)!important;color:hsla(0,0%,100%,.87)!important}",""]);const n=r},4843:(e,t,a)=>{a.r(t),a.d(t,{default:()=>T});var o=a(6598),r={key:0,class:"transition-opacity top-0 left-0 min-h-full min-w-full z-auto bg-black bg-opacity-40 absolute overflow-y-scroll"},n={class:"flex items-center justify-center min-h-screen"},s={class:"relative px-4 w-full max-w-2xl h-full md:h-auto"},l={class:"relative bg-gray-800 rounded-lg shadow"},i={class:"flex justify-between items-start p-3 rounded-t border-b border-gray-500"},d={class:"text-xl font-semibold text-gray-300 lg:text-2xl"},c={class:"p-4 space-y-6"},m={class:"relative z-0 mb-5 w-full group"},u=(0,o.createElementVNode)("label",{for:"name",class:"absolute text-base text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-100 peer-focus:-translate-y-6"},"Nombre Gestión *",-1),p={class:"relative z-0 w-full group"},h=(0,o.createElementVNode)("label",{for:"address",class:"block mb-2 text-gray-400"},"Seleccione el rango de fechas: ",-1),g={class:"flex items-center mb-3"},f={class:"relative z-0 w-full group"},v=(0,o.createElementVNode)("span",{class:"mx-2 text-gray-400"},"Desde",-1),w={class:"relative z-0 w-full group"},y=(0,o.createElementVNode)("span",{class:"mx-2 text-gray-400"},"Hasta",-1),D={class:"flex items-center p-3 space-x-2 rounded-b border-t border-gray-500"};var b=a(9669),E=a.n(b),_=a(8223),x=a(5090),N=a(7484),k=a.n(N),V=a(6607),M=a.n(V),C=a(285),Y=a.n(C);k().extend(M()),k().extend(Y());const B={directives:{focus:{mounted:function(e){return e.focus()}}},components:{Calendar:_.Z},props:{modalTitle:String,modalButtons:String,id_company:Number,allDates:Array,managementData:{type:Object,default:{id_management:"",id_user:"",id_company:"",status:"",start_date:"",end_date:"",name:""}},showModal:{type:Boolean,default:!1}},watch:{managementData:{handler:function(){this.newData=Object.assign({},this.managementData)}}},data:function(){return{newData:Object.assign({},this.managementData),dates:this.allDates,errorName:!1,messageErrorName:"",errorStart_date:!1,messageErrorStart_date:"",errorEnd_date:!1,messageErrorEnd_date:"",errorGeneric:!1,messageErrorGeneric:""}},methods:{flushErrors:function(){this.errorName=!1,this.messageErrorName="",this.errorStart_date=!1,this.messageErrorStart_date="",this.errorEnd_date=!1,this.messageErrorEnd_date="",this.errorGeneric=!1,this.messageErrorGeneric=""},cancel:function(){this.$emit("close"),this.newData=Object.assign({},this.managementData),this.flushErrors()},setColorForDate:function(e){for(var t=parseFloat(e.month)+parseFloat(1),a=k()(e.day+"/"+t+"/"+e.year,"D/M/YYYY",!0),o="white",r=0;r<this.allDates.length;r++){var n=k()(this.allDates[r].start_date,"DD/MM/YYYY",!0),s=k()(this.allDates[r].end_date,"DD/MM/YYYY",!0);k()(a).isBetween(n,s,null,"[]")&&(o="red",this.allDates[r].id_management==this.managementData.id_management&&(o="green"))}return o},removeEmptyValues:function(e){var t=e;for(var a in t)""!=t[a]&&null!=t[a]||delete t[a];return t},setErrors:function(e){for(var t in e)"name"==t&&e[t][0]&&(this.errorName=!0,x.Notify.failure(e[t][0])),"start_date"==t&&e[t][0]&&(this.errorStart_date=!0,x.Notify.failure(e[t][0])),"end_date"==t&&e[t][0]&&(this.errorEnd_date=!0,x.Notify.failure(e[t][0]))},create:function(){var e=this;console.log(this.newData);var t={name:this.newData.name,start_date:k()(this.newData.start_date).format("YYYY-MM-DD"),end_date:k()(this.newData.end_date).format("YYYY-MM-DD"),id_company:this.id_company.toString()};x.Notify.init({clickToClose:!0}),E().post(route("managementdate.api.create"),t).catch((function(t){var a,o;(e.flushErrors(),t.response.data.message)?1==t.response.data.type?x.Notify.failure(t.response.data.message):e.setErrors(null==t||null===(a=t.response)||void 0===a||null===(o=a.data)||void 0===o?void 0:o.errors):1==t.response.data.type?x.Notify.failure("Error al crear"):(e.errorGeneric=!0,e.messageErrorGeneric=t.response.data.message)})).then((function(t){try{t.data.success&&(x.Notify.success("Gestión creada con éxito"),e.$emit("update-data"),e.cancel()),console.log(t)}catch(e){console.log("No se pudo completar la peticion")}}))},update:function(){var e=this;console.log(this.newData);var t={id_management:this.newData.id_management,name:this.newData.name,start_date:k()(this.newData.start_date instanceof Date?this.newData.start_date.getTime():k()(this.newData.start_date,"DD/MM/YYYY")).format("YYYY-MM-DD"),end_date:k()(this.newData.end_date instanceof Date?this.newData.end_date.getTime():k()(this.newData.end_date,"DD/MM/YYYY")).format("YYYY-MM-DD")};t=this.removeEmptyValues(t),x.Notify.init({clickToClose:!0}),E().post(route("managementdate.api.update"),t).catch((function(t){var a,o;(e.flushErrors(),t.response.data.message)?1==t.response.data.type?x.Notify.failure(t.response.data.message):e.setErrors(null==t||null===(a=t.response)||void 0===a||null===(o=a.data)||void 0===o?void 0:o.errors):1==t.response.data.type?x.Notify.failure("Error al actualizar"):(e.errorGeneric=!0,e.messageErrorGeneric=t.response.data.message)})).then((function(t){try{t.data.success&&(x.Notify.success("Se ha actualizado la gestión"),e.$emit("update-data"),e.cancel())}catch(e){console.log("No se pudo completar la peticion")}}))}}};const T=(0,a(3744).Z)(B,[["render",function(e,t,a,b,E,_){var x=(0,o.resolveComponent)("Calendar"),N=(0,o.resolveDirective)("focus");return a.showModal?((0,o.openBlock)(),(0,o.createElementBlock)("div",r,[(0,o.createElementVNode)("div",n,[(0,o.createElementVNode)("div",s,[(0,o.createElementVNode)("div",l,[(0,o.createElementVNode)("div",i,[(0,o.createElementVNode)("h3",d,(0,o.toDisplayString)(a.modalTitle),1)]),(0,o.createElementVNode)("div",c,[(0,o.createElementVNode)("form",null,[(0,o.createElementVNode)("div",m,[(0,o.withDirectives)((0,o.createElementVNode)("input",{autocomplete:"off",type:"text",class:"block py-2.5 px-0 w-full text-xl text-gray-300 bg-transparent border-0 border-b-2 border-gray-300 appearance-none focus:outline-none focus:ring-0 focus:border-blue-600 peer",oninput:"javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);",onkeypress:"return /[A-Z 0-9]/i.test(event.key)",maxlength:"15","onUpdate:modelValue":t[0]||(t[0]=function(e){return E.newData.name=e}),placeholder:" ",required:""},null,512),[[N],[o.vModelText,E.newData.name]]),u]),(0,o.createElementVNode)("div",p,[h,(0,o.createElementVNode)("div",g,[(0,o.createElementVNode)("div",f,[v,(0,o.createVNode)(x,{modelValue:E.newData.start_date,"onUpdate:modelValue":t[1]||(t[1]=function(e){return E.newData.start_date=e}),dateFormat:"dd/mm/yy",baseZIndex:100},{date:(0,o.withCtx)((function(e){return[(0,o.createElementVNode)("p",{style:(0,o.normalizeStyle)("color: "+_.setColorForDate(e.date)+";")},(0,o.toDisplayString)(e.date.day),5)]})),_:1},8,["modelValue"])]),(0,o.createElementVNode)("div",w,[y,(0,o.createVNode)(x,{baseZIndex:100,modelValue:E.newData.end_date,"onUpdate:modelValue":t[2]||(t[2]=function(e){return E.newData.end_date=e}),dateFormat:"dd/mm/yy"},{date:(0,o.withCtx)((function(e){return[(0,o.createElementVNode)("p",{style:(0,o.normalizeStyle)("color: "+_.setColorForDate(e.date)+";")},(0,o.toDisplayString)(e.date.day),5)]})),_:1},8,["modelValue"])])])])])]),(0,o.createElementVNode)("div",D,[(0,o.createElementVNode)("button",{onClick:t[3]||(t[3]=function(e){return _.cancel()}),"data-modal-toggle":"modal-addmanagement",type:"button",class:"text-white bg-rose-600 hover:bg-rose-700 font-medium rounded-lg text-sm px-5 py-2.5 text-center"}," Cancelar "),"register"==a.modalButtons?((0,o.openBlock)(),(0,o.createElementBlock)("button",{key:0,onClick:t[4]||(t[4]=function(){return _.create&&_.create.apply(_,arguments)}),"data-modal-toggle":"modal-addmanagement",type:"button",id:"register",class:"text-white bg-green-600 hover:bg-green-700 font-medium rounded-lg text-sm px-5 py-2.5 text-center"}," Registrar ")):(0,o.createCommentVNode)("",!0),"edit"==a.modalButtons?((0,o.openBlock)(),(0,o.createElementBlock)("button",{key:1,onClick:t[5]||(t[5]=function(){return _.update&&_.update.apply(_,arguments)}),type:"button",id:"edit",class:"text-white bg-yellow-400 hover:bg-yellow-500 font-medium rounded-lg text-sm px-5 py-2.5 text-center"}," Editar ")):(0,o.createCommentVNode)("",!0)])])])])])):(0,o.createCommentVNode)("",!0)}]])},5495:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Y});var o=a(6598),r={key:0,class:"transition-opacity top-0 left-0 min-h-full min-w-full z-auto bg-black bg-opacity-40 absolute overflow-y-scroll"},n={class:"flex items-center justify-center min-h-screen"},s={class:"relative px-4 w-full max-w-2xl h-full md:h-auto"},l={class:"relative bg-gray-800 rounded-lg shadow"},i={class:"flex justify-between items-start p-3 rounded-t border-b border-gray-500"},d={class:"text-xl font-semibold text-gray-300 lg:text-2xl"},c={class:"p-4 space-y-6"},m={class:"relative z-0 mb-5 w-full group"},u=(0,o.createElementVNode)("label",{for:"name",class:"absolute text-base text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-100 peer-focus:-translate-y-6"},"Nombre Periodo *",-1),p={class:"relative mb-5 z-0 w-full group"},h=(0,o.createElementVNode)("label",{for:"address",class:"block mb-2 text-gray-400"},"Seleccione el rango de fechas:",-1),g={class:"flex items-center"},f=(0,o.createElementVNode)("span",{class:"mx-2 text-gray-400"},"Desde",-1),v=(0,o.createElementVNode)("span",{class:"mr-2 ml-8 text-gray-400"},"Hasta",-1),w={class:"flex items-center p-3 space-x-2 rounded-b border-t border-gray-500"};var y=a(9669),D=a.n(y),b=a(8223),E=a(5090),_=a(7484),x=a.n(_),N=a(6607),k=a.n(N),V=a(285),M=a.n(V);x().extend(k()),x().extend(M());const C={directives:{focus:{mounted:function(e){return e.focus()}}},components:{Calendar:b.Z},props:{managementData:{type:Object,default:{}},periodDates:Array,id_management:Number,id_company:Number,id_user:Number,realstartdate:String,realenddate:String,showModal:{type:Boolean,default:!1},modalTitle:String,modalButtons:String,periodData:{type:Object,default:{id_period:"",id_user:"",id_management:"",status:"",start_date:"",end_date:"",name:""}}},watch:{periodData:{handler:function(){this.newData=Object.assign({},this.periodData)}}},data:function(){return{newData:Object.assign({},this.periodData),dates:this.periodDates,errorName:!1,messageErrorName:"",errorStart_date:!1,messageErrorStart_date:"",errorEnd_date:!1,messageErrorEnd_date:"",errorGeneric:!1,messageErrorGeneric:""}},methods:{flushErrors:function(){this.errorName=!1,this.messageErrorName="",this.errorStart_date=!1,this.messageErrorStart_date="",this.errorEnd_date=!1,this.messageErrorEnd_date="",this.errorGeneric=!1,this.messageErrorGeneric=""},cancel:function(){this.$emit("close"),this.newData=Object.assign({},this.periodData),this.flushErrors()},setColorForDate:function(e){for(var t=parseFloat(e.month)+parseFloat(1),a=x()(e.day+"/"+t+"/"+e.year,"D/M/YYYY",!0),o="white",r=0;r<this.periodDates.length;r++){var n=x()(this.periodDates[r].start_date,"DD/MM/YYYY",!0),s=x()(this.periodDates[r].end_date,"DD/MM/YYYY",!0);x()(a).isBetween(n,s,null,"[]")&&(o="red",this.periodDates[r].id_period==this.periodData.id_period&&(o="green"))}return x()(a).isBetween(x()(this.managementData.start_date,"DD/MM/YYYY"),x()(this.managementData.end_date,"DD/MM/YYYY"),null,"[]")||(o="LightCoral"),o},removeEmptyValues:function(e){var t=e;for(var a in t)""!=t[a]&&null!=t[a]||delete t[a];return t},setErrors:function(e,t){for(var a in e)"name"==a&&e[a][0]&&(this.errorName=!0,E.Notify.failure(e[a][0])),"start_date"==a&&e[a][0]&&(this.errorStart_date=!0,E.Notify.failure(e[a][0])),"end_date"==a&&e[a][0]&&(console.log(e[a][0]),this.errorEnd_date=!0,E.Notify.failure(e[a][0]))},create:function(){var e=this;console.log(this.newData);var t={name:this.newData.name,start_date:x()(this.newData.start_date).format("YYYY-MM-DD"),end_date:x()(this.newData.end_date).format("YYYY-MM-DD"),id_management:this.id_management.toString()};E.Notify.init({clickToClose:!0}),D().post(route("period.api.create"),t).catch((function(t){e.flushErrors(),t.response.data.message?1==t.response.data.type?E.Notify.failure(t.response.data.message):e.setErrors(t.response.data.errors,t.response.data.message):1==t.response.data.type?E.Notify.failure("Error al crear"):(e.errorGeneric=!0,e.messageErrorGeneric=t.response.data.message)})).then((function(t){try{var a;null!==(a=t.data)&&void 0!==a&&a.success&&(E.Notify.success("Periodo creado con éxito"),e.$emit("updatePeriods"),e.cancel())}catch(e){console.log("No se pudo completar la peticion")}}))},update:function(){var e=this;console.log(this.newData);var t={id_period:this.newData.id_period,name:this.newData.name,start_date:x()(this.newData.start_date instanceof Date?this.newData.start_date.getTime():x()(this.newData.start_date,"DD/MM/YYYY")).format("YYYY-MM-DD"),end_date:x()(this.newData.end_date instanceof Date?this.newData.end_date.getTime():x()(this.newData.end_date,"DD/MM/YYYY")).format("YYYY-MM-DD"),id_company:this.id_company,realstartdate:this.realstartdate,realenddate:this.realenddate};t=this.removeEmptyValues(t),E.Notify.init({clickToClose:!0}),D().post(route("period.api.update"),t).catch((function(t){e.flushErrors(),t.response.data.message?1==t.response.data.type?E.Notify.failure(t.response.data.message):e.setErrors(t.response.data.errors,t.response.data.message):1==t.response.data.type?E.Notify.failure("Error al actualizar"):(e.errorGeneric=!0,e.messageErrorGeneric=t.response.data.message)})).then((function(t){var a;null!=t&&null!==(a=t.data)&&void 0!==a&&a.success&&(E.Notify.success("Se ha actualizado el periodo"),e.$emit("updatePeriods"),e.$emit("cleanSelectedPeriod"),e.cancel())}))}}};const Y=(0,a(3744).Z)(C,[["render",function(e,t,a,y,D,b){var E=(0,o.resolveComponent)("Calendar"),_=(0,o.resolveDirective)("focus");return a.showModal?((0,o.openBlock)(),(0,o.createElementBlock)("div",r,[(0,o.createElementVNode)("div",n,[(0,o.createElementVNode)("div",s,[(0,o.createElementVNode)("div",l,[(0,o.createElementVNode)("div",i,[(0,o.createElementVNode)("h3",d,(0,o.toDisplayString)(a.modalTitle),1)]),(0,o.createElementVNode)("div",c,[(0,o.createElementVNode)("form",null,[(0,o.createElementVNode)("div",m,[(0,o.withDirectives)((0,o.createElementVNode)("input",{autocomplete:"off",type:"text",class:"block py-2.5 px-0 w-full text-xl text-gray-300 bg-transparent border-0 border-b-2 border-gray-300 appearance-none focus:outline-none focus:ring-0 focus:border-blue-600 peer",oninput:"javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);",onkeypress:"return /[A-Z 0-9]/i.test(event.key)",maxlength:"15","onUpdate:modelValue":t[0]||(t[0]=function(e){return D.newData.name=e}),placeholder:" ",required:""},null,512),[[_],[o.vModelText,D.newData.name]]),u]),(0,o.createElementVNode)("div",p,[h,(0,o.createElementVNode)("div",g,[f,(0,o.createVNode)(E,{modelValue:D.newData.start_date,"onUpdate:modelValue":t[1]||(t[1]=function(e){return D.newData.start_date=e}),dateFormat:"dd/mm/yy",baseZIndex:100},{date:(0,o.withCtx)((function(e){return[(0,o.createElementVNode)("p",{style:(0,o.normalizeStyle)("color: "+b.setColorForDate(e.date)+";")},(0,o.toDisplayString)(e.date.day),5)]})),_:1},8,["modelValue"]),v,(0,o.createVNode)(E,{baseZIndex:100,modelValue:D.newData.end_date,"onUpdate:modelValue":t[2]||(t[2]=function(e){return D.newData.end_date=e}),dateFormat:"dd/mm/yy"},{date:(0,o.withCtx)((function(e){return[(0,o.createElementVNode)("p",{style:(0,o.normalizeStyle)("color: "+b.setColorForDate(e.date)+";")},(0,o.toDisplayString)(e.date.day),5)]})),_:1},8,["modelValue"])])])])]),(0,o.createElementVNode)("div",w,[(0,o.createElementVNode)("button",{onClick:t[3]||(t[3]=function(e){return b.cancel()}),type:"button",class:"text-white bg-rose-600 hover:bg-rose-700 font-medium rounded-lg text-sm px-5 py-2.5 text-center"}," Cancelar "),"register"==a.modalButtons?((0,o.openBlock)(),(0,o.createElementBlock)("button",{key:0,onClick:t[4]||(t[4]=function(){return b.create&&b.create.apply(b,arguments)}),type:"button",id:"register",class:"text-white bg-green-600 hover:bg-green-700 font-medium rounded-lg text-sm px-5 py-2.5 text-center"}," Registrar ")):(0,o.createCommentVNode)("",!0),"edit"==a.modalButtons?((0,o.openBlock)(),(0,o.createElementBlock)("button",{key:1,onClick:t[5]||(t[5]=function(){return b.update&&b.update.apply(b,arguments)}),type:"button",id:"edit",class:"text-white bg-yellow-400 hover:bg-yellow-500 font-medium rounded-lg text-sm px-5 py-2.5 text-center"}," Editar ")):(0,o.createCommentVNode)("",!0)])])])])])):(0,o.createCommentVNode)("",!0)}]])},314:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Z});var o=a(6598),r={key:0},n={class:"mt-5"},s={class:"grid grid-cols-1 sm:grid-cols-2 mb-2"},l={class:"col-span-1 self-end justify-center order-last sm:order-first"},i={class:"self-center items-center content-center"},d={class:"p-input-icon-left"},c=(0,o.createElementVNode)("i",{class:"pi pi-search"},null,-1),m={class:"col-span-1 self-end mb-2 sm:mb-0"},u={class:"flex justify-center sm:justify-end space-x-2"},p=[(0,o.createElementVNode)("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[(0,o.createElementVNode)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)],h=[(0,o.createElementVNode)("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[(0,o.createElementVNode)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})],-1)],g=["disabled"],f=[(0,o.createElementVNode)("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[(0,o.createElementVNode)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)],v=["disabled"],w=[(0,o.createElementVNode)("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[(0,o.createElementVNode)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)],y=["disabled"],D=[(0,o.createElementVNode)("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[(0,o.createElementVNode)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)],b=(0,o.createTextVNode)(" No hay gestiones, ¡añade una! "),E={key:1};var _=a(6076),x=a(922),N=a(5247),k=a(4843),V=a(6358),M=a(7484),C=a.n(M),Y=a(7915),B=a(9669),T=a.n(B),F=a(8642),j=a(4443),S=a(1678),P=a(6886);const z={directives:{tooltip:Y.Z},emits:["update-data","setTitleUp"],props:{company:{type:Object,default:{}}},components:{DataTable:x.Z,Column:N.Z,InputText:_.Z,ModalManagementDate:k.default,TablePeriods:P.default},data:function(){return{dates:this.company.management_dates,filters:{global:{value:null,matchMode:V.a6.CONTAINS}},currentCellId:"",showModalCreate:!1,showModalEdit:!1,searchValue:"",selectedDate:{},showManagementDate:!0}},mounted:function(){null!=this.dates&&this.transformDates()},watch:{company:{handler:function(){this.dates=this.company.management_dates,this.selectedDate={},this.transformDates()}}},methods:{goReport:function(){window.open("http://reportes.queeserp.tk/flow.html?_flowId=viewReportFlow&_flowId=viewReportFlow&ParentFolderUri=%2Fthemes%2FReportes&reportUnit=%2Fthemes%2FReportes%2FReporteGestion&standAlone=true&id_user=".concat(this.company.id_user,"&id_company=").concat(this.company.id_company,"&j_username=jasperadmin&j_password=bitnami&sessionDecorator=no"))},log:function(e){console.log(e)},setTitleUp:function(e){this.$emit("setTitleUp",e)},goToPeriods:function(){this.showManagementDate=!1},deleteManagement:function(){var e=this;console.log(this.selectedDate),F.Confirm.init({titleColor:"#FF0000",messageColor:"#FF0000",okButtonBackground:"#FF0000"}),F.Confirm.show("¿Deseas eliminar la gestión?","Estás a punto de eliminar la gestión "+this.selectedDate.name,"Eliminar","Cancelar",(function(){j.Loading.standard({clickToClose:!1,svgSize:"200"});var t={id_management:e.selectedDate.id_management};S.Notify.init({clickToClose:!0}),T().post(route("managementdate.api.delete"),t).then((function(t){var a;null!==(a=t.data)&&void 0!==a&&a.success?(e.$emit("update-data"),S.Notify.success("Gestión eliminada"),e.selectedDate={}):S.Notify.failure(t.data.message),j.Loading.remove(250)})).catch((function(e){console.error(e),S.Notify.failure("Error al eliminar la gestión")}))})),console.log(this.selectedDate);this.selectedDate.id_management},setColorForDate:function(e){for(var t=parseFloat(e.month)+parseFloat(1),a=e.year+"/"+t+"/"+e.day,o="white",r=0;r<this.dates.length;r++)C()(a).isBetween(this.dates[r].start_date,this.dates[r].end_date,null,"[]")&&(o="red",this.dates[r].id_management==this.currentCellId&&(o="green"));return o},transformDates:function(){this.dates.forEach((function(e){e.start_date=C()(e.start_date).format("DD/MM/YYYY"),e.end_date=C()(e.end_date).format("DD/MM/YYYY")}))}}};var U=a(3379),R=a.n(U),G=a(7158),O={insert:"head",singleton:!1};R()(G.Z,O);G.Z.locals;const Z=(0,a(3744).Z)(z,[["render",function(e,t,a,_,x,N){var k=(0,o.resolveComponent)("InputText"),V=(0,o.resolveComponent)("Column"),M=(0,o.resolveComponent)("DataTable"),C=(0,o.resolveComponent)("ModalManagementDate"),Y=(0,o.resolveComponent)("TablePeriods"),B=(0,o.resolveDirective)("tooltip");return x.showManagementDate?((0,o.openBlock)(),(0,o.createElementBlock)("div",r,[(0,o.createElementVNode)("div",n,[(0,o.createElementVNode)("div",s,[(0,o.createElementVNode)("div",l,[(0,o.createElementVNode)("div",i,[(0,o.createElementVNode)("span",d,[c,(0,o.createVNode)(k,{type:"text",modelValue:x.filters.global.value,"onUpdate:modelValue":t[0]||(t[0]=function(e){return x.filters.global.value=e}),placeholder:"Buscar"},null,8,["modelValue"])])])]),(0,o.createElementVNode)("div",m,[(0,o.createElementVNode)("div",u,[(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createElementBlock)("button",{onClick:t[1]||(t[1]=function(e){return x.showModalCreate=!0}),class:"disabled:bg-green-800 bg-green-500 hover:bg-green-600 text-white rounded-lg px-4 py-2.5"},p)),[[B,{value:"Añadir una gestión",class:"text-center"},void 0,{bottom:!0}]]),(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createElementBlock)("button",{onClick:t[2]||(t[2]=function(){return N.goReport&&N.goReport.apply(N,arguments)}),class:"disabled:bg-indigo-800 bg-indigo-700 hover:bg-indigo-600 text-white rounded-lg px-4 py-2.5"},h)),[[B,{value:"Generar reportes",class:"text-center"},void 0,{bottom:!0}]]),(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createElementBlock)("button",{disabled:0==Object.keys(x.selectedDate).length||0==x.selectedDate.status,onClick:t[3]||(t[3]=function(e){return x.showModalEdit=!0}),class:"disabled:bg-yellow-600 bg-yellow-400 hover:bg-yellow-500 text-white rounded-lg px-4 py-2.5"},f,8,g)),[[B,{value:"Edita la gestión",class:"text-center"},void 0,{bottom:!0}]]),(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createElementBlock)("button",{disabled:0==Object.keys(x.selectedDate).length,onClick:t[4]||(t[4]=function(e){return N.goToPeriods()}),class:"disabled:bg-sky-800 bg-sky-500 hover:bg-sky-600 text-white rounded-lg px-4 py-2.5"},w,8,v)),[[B,{value:"Ver periodos de esta gestión",class:"text-center"},void 0,{bottom:!0}]]),(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createElementBlock)("button",{disabled:0==Object.keys(x.selectedDate).length,onClick:t[5]||(t[5]=function(e){return N.deleteManagement()}),class:"disabled:bg-rose-800 bg-rose-500 hover:bg-rose-600 text-white rounded-lg px-4 py-2.5"},D,8,y)),[[B,{value:"Eliminar esta gestión",class:"text-center"},void 0,{left:!0}]])])])])]),(0,o.createVNode)(M,{class:"p-datatable-lg",value:x.dates,dataKey:"id_management",paginator:!0,rows:10,responsiveLayout:"scroll",selection:x.selectedDate,"onUpdate:selection":t[6]||(t[6]=function(e){return x.selectedDate=e}),selectionMode:"single",filters:x.filters,"onUpdate:filters":t[7]||(t[7]=function(e){return x.filters=e}),style:{}},{empty:(0,o.withCtx)((function(){return[b]})),default:(0,o.withCtx)((function(){return[(0,o.createVNode)(V,{field:"name",header:"Nombre",sortable:!0,filterMatchMode:"contains"}),(0,o.createVNode)(V,{field:"start_date",header:"Fecha inicio",sortable:!1,filterMatchMode:"contains"}),(0,o.createVNode)(V,{field:"end_date",header:"Fecha fin",sortable:!1,filterMatchMode:"contains"}),(0,o.createVNode)(V,{field:"status",header:"Estado",sortable:!0,filterMatchMode:"contains"},{body:(0,o.withCtx)((function(e){return[(0,o.createElementVNode)("span",{class:(0,o.normalizeClass)("bg-"+(1==e.data.status?"green":"red")+"-600 text-white p-1.5 rounded-lg")},(0,o.toDisplayString)(1==e.data.status?"ABIERTO":"CERRADO"),3)]})),_:1})]})),_:1},8,["value","selection","filters"]),(0,o.createVNode)(C,{allDates:a.company.management_dates,id_company:a.company.id_company,showModal:x.showModalCreate,modalTitle:"Crea una gestión",modalButtons:"register",onClose:t[8]||(t[8]=function(e){return x.showModalCreate=!1}),onUpdateData:t[9]||(t[9]=function(t){return e.$emit("update-data"),x.selectedDate})},null,8,["allDates","id_company","showModal"]),(0,o.createVNode)(C,{allDates:a.company.management_dates,id_company:a.company.id_company,showModal:x.showModalEdit,modalTitle:"Editando gestión",modalButtons:"edit",onClose:t[10]||(t[10]=function(e){return x.showModalEdit=!1}),managementData:x.selectedDate,onEraseSelection:t[11]||(t[11]=function(e){return x.selectedDate={}}),onUpdateData:t[12]||(t[12]=function(t){return e.$emit("update-data")})},null,8,["allDates","id_company","showModal","managementData"])])):((0,o.openBlock)(),(0,o.createElementBlock)("div",E,[(0,o.createVNode)(Y,{onGoBack:t[13]||(t[13]=function(e){return x.showManagementDate=!0}),onSetTitleUp:N.setTitleUp,management:x.selectedDate},null,8,["onSetTitleUp","management"])]))}]])},6886:(e,t,a)=>{a.r(t),a.d(t,{default:()=>B});var o=a(6598),r={class:"mt-5"},n={class:"grid grid-cols-1 sm:grid-cols-2 mb-2"},s={class:"col-span-1 self-end justify-center order-last sm:order-first"},l=[(0,o.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"white",viewBox:"0 0 16 16"},[(0,o.createElementVNode)("path",{d:"M15.683 3a2 2 0 0 0-2-2h-7.08a2 2 0 0 0-1.519.698L.241 7.35a1 1 0 0 0 0 1.302l4.843 5.65A2 2 0 0 0 6.603 15h7.08a2 2 0 0 0 2-2V3zM5.829 5.854a.5.5 0 1 1 .707-.708l2.147 2.147 2.146-2.147a.5.5 0 1 1 .707.708L9.39 8l2.146 2.146a.5.5 0 0 1-.707.708L8.683 8.707l-2.147 2.147a.5.5 0 0 1-.707-.708L7.976 8 5.829 5.854z"})],-1)],i={class:"col-span-1 self-end mb-2 sm:mb-0"},d={class:"flex justify-center sm:justify-end space-x-2"},c=["disabled"],m=[(0,o.createElementVNode)("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[(0,o.createElementVNode)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)],u=[(0,o.createElementVNode)("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[(0,o.createElementVNode)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})],-1)],p=["disabled"],h=[(0,o.createElementVNode)("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[(0,o.createElementVNode)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)],g=["disabled"],f=[(0,o.createElementVNode)("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[(0,o.createElementVNode)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)],v=(0,o.createTextVNode)(" No hay periodos, ¡añade uno! ");var w=a(922),y=a(5247),D=a(5495),b=a(6358),E=a(9669),_=a.n(E),x=a(7915),N=a(7484),k=a.n(N),V=a(8642),M=a(4443),C=a(1678);const Y={directives:{tooltip:x.Z},emits:["updateData","goBack","setTitleUp"],components:{DataTable:w.Z,Column:y.Z,ModalPeriod:D.default},props:{management:{type:Object,required:!0}},data:function(){return{filters:{global:{value:null,matchMode:b.a6.CONTAINS}},periodsData:[],selectedPeriod:{},showModalCreate:!1,showModalEdit:!1}},watch:{management:{handler:function(){this.setDataTable()}}},mounted:function(){this.setDataTable(),this.$emit("setTitleUp","Administración de gestión -> ".concat(this.management.name," [ ").concat(this.management.start_date," - ").concat(this.management.end_date," ]"))},methods:{goReport:function(){window.open("\n                http://reportes.queeserp.tk/flow.html?_flowId=viewReportFlow&_flowId=viewReportFlow&ParentFolderUri=%2Fthemes%2FReportes&reportUnit=%2Fthemes%2FReportes%2FReportePeriodo&standAlone=true&id_user=".concat(this.management.id_user,"&id_company=").concat(this.management.id_company,"&id_management=").concat(this.management.id_management,"&j_username=jasperadmin&j_password=bitnami&sessionDecorator=no\n                "))},deletePeriod:function(){var e=this;V.Confirm.init({titleColor:"#FF0000",messageColor:"#FF0000",okButtonBackground:"#FF0000"}),V.Confirm.show("¿Deseas eliminar el periodo?","Estás a punto de eliminar el periodo "+this.selectedPeriod.name,"Eliminar","Cancelar",(function(){M.Loading.standard({clickToClose:!1,svgSize:"200"});var t={id_period:e.selectedPeriod.id_period,id_user:e.management.id_user,id_company:e.management.id_company,start_date:e.selectedPeriod.start_date,end_date:e.selectedPeriod.end_date};C.Notify.init({clickToClose:!0}),console.log("pasando trash",t),_().post(route("period.api.delete"),t).then((function(t){var a;null!==(a=t.data)&&void 0!==a&&a.success?(e.setDataTable(),C.Notify.success("Periodo eliminado"),e.selectedPeriod={}):(C.Notify.failure(t.data.message),e.selectedPeriod={}),M.Loading.remove(250)})).catch((function(e){C.Notify.failure(e),M.Loading.remove(250)}))}))},formatDate:function(e){e.forEach((function(e){e.start_date=k()(e.start_date).format("DD/MM/YYYY"),e.end_date=k()(e.end_date).format("DD/MM/YYYY")}))},setDataTable:function(){var e=this;_().get(route("period.api.read",this.management.id_management)).then((function(t){e.periodsData=t.data,e.formatDate(e.periodsData)}))}}};const B=(0,a(3744).Z)(Y,[["render",function(e,t,a,w,y,D){var b=(0,o.resolveComponent)("Column"),E=(0,o.resolveComponent)("DataTable"),_=(0,o.resolveComponent)("ModalPeriod"),x=(0,o.resolveDirective)("tooltip");return(0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,null,[(0,o.createElementVNode)("div",r,[(0,o.createElementVNode)("div",n,[(0,o.createElementVNode)("div",s,[(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createElementBlock)("button",{onClick:t[0]||(t[0]=function(t){e.$emit("goBack"),e.$emit("setTitleUp","Administración de gestión")}),class:"bg-sky-600 hover:bg-sky-700 text-white rounded-lg px-4 py-2.5"},l)),[[x,{value:"Volver a gestiones",class:"text-center"},void 0,{right:!0}]])]),(0,o.createElementVNode)("div",i,[(0,o.createElementVNode)("div",d,[(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createElementBlock)("button",{disabled:0==a.management.status,onClick:t[1]||(t[1]=function(e){return y.showModalCreate=!0}),class:"disabled:bg-green-800 bg-green-500 hover:bg-green-600 text-white rounded-lg px-4 py-2.5"},m,8,c)),[[x,{value:"Añadir un periodo",class:"text-center"},void 0,{bottom:!0}]]),(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createElementBlock)("button",{onClick:t[2]||(t[2]=function(){return D.goReport&&D.goReport.apply(D,arguments)}),class:"disabled:bg-indigo-800 bg-indigo-700 hover:bg-indigo-600 text-white rounded-lg px-4 py-2.5"},u)),[[x,{value:"Generar reportes",class:"text-center"},void 0,{bottom:!0}]]),(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createElementBlock)("button",{disabled:0==Object.keys(y.selectedPeriod).length||0==a.management.status,onClick:t[3]||(t[3]=function(e){return y.showModalEdit=!0}),class:"disabled:bg-yellow-600 bg-yellow-400 hover:bg-yellow-500 text-white rounded-lg px-4 py-2.5"},h,8,p)),[[x,{value:"Edita periodo",class:"text-center"},void 0,{bottom:!0}]]),(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createElementBlock)("button",{onClick:t[4]||(t[4]=function(e){return D.deletePeriod()}),disabled:0==Object.keys(y.selectedPeriod).length,class:"disabled:bg-rose-800 bg-rose-500 hover:bg-rose-600 text-white rounded-lg px-4 py-2.5"},f,8,g)),[[x,{value:"Eliminar esta periodo",class:"text-center"},void 0,{left:!0}]])])])])]),(0,o.createVNode)(E,{class:"p-datatable-lg",value:y.periodsData,dataKey:"id_period",paginator:!0,rows:10,responsiveLayout:"scroll",selection:y.selectedPeriod,"onUpdate:selection":t[5]||(t[5]=function(e){return y.selectedPeriod=e}),selectionMode:"single",filters:y.filters,"onUpdate:filters":t[6]||(t[6]=function(e){return y.filters=e}),style:{}},{empty:(0,o.withCtx)((function(){return[v]})),default:(0,o.withCtx)((function(){return[(0,o.createVNode)(b,{field:"name",header:"Nombre",sortable:!0,filterMatchMode:"contains"}),(0,o.createVNode)(b,{field:"start_date",header:"Fecha inicio",sortable:!1,filterMatchMode:"contains"}),(0,o.createVNode)(b,{field:"end_date",header:"Fecha fin",sortable:!1,filterMatchMode:"contains"}),(0,o.createVNode)(b,{field:"status",header:"Estado",sortable:!0,filterMatchMode:"contains"},{body:(0,o.withCtx)((function(e){return[(0,o.createElementVNode)("span",{class:(0,o.normalizeClass)("bg-"+(1==e.data.status?"green":"red")+"-600 text-white p-1.5 rounded-lg")},(0,o.toDisplayString)(1==e.data.status?"ABIERTO":"CERRADO"),3)]})),_:1})]})),_:1},8,["value","selection","filters"]),(0,o.createVNode)(_,{managementData:a.management,periodDates:y.periodsData,id_management:a.management.id_management,showModal:y.showModalCreate,modalTitle:"Crear periodo",modalButtons:"register",onClose:t[7]||(t[7]=function(e){return y.showModalCreate=!1}),onUpdatePeriods:D.setDataTable},null,8,["managementData","periodDates","id_management","showModal","onUpdatePeriods"]),(0,o.createVNode)(_,{managementData:a.management,periodData:y.selectedPeriod,periodDates:y.periodsData,id_management:a.management.id_management,id_company:a.management.id_company,id_user:a.management.id_user,showModal:y.showModalEdit,modalTitle:"Editar Periodo",modalButtons:"edit",onClose:t[8]||(t[8]=function(e){return y.showModalEdit=!1}),onUpdatePeriods:D.setDataTable,onCleanSelectedPeriod:t[9]||(t[9]=function(e){return y.selectedPeriod={}}),realstartdate:y.selectedPeriod.start_date,realenddate:y.selectedPeriod.end_date},null,8,["managementData","periodData","periodDates","id_management","id_company","id_user","showModal","onUpdatePeriods","realstartdate","realenddate"])],64)}]])}}]);