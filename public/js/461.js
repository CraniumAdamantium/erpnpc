"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[461,759,290,638,613],{7707:(e,t,a)=>{a.d(t,{Z:()=>i});var n=a(3645),o=a.n(n)()((function(e){return e[1]}));o.push([e.id,"body[data-v-00b8efae]{background:#4682b4}.aselect[data-v-00b8efae]{margin:20px auto;width:180px}.aselect .selector[data-v-00b8efae]{background:#171a21;border:2px #dcdcdc;border-radius:4px;position:relative;z-index:1}.aselect .selector .arrow[data-v-00b8efae]{border-left:7px solid transparent;border-right:7px solid transparent;border-top:10px solid #888;height:0;position:absolute;right:10px;top:40%;transform:rotate(0deg) translateY(0);transition-duration:.3s;transition-timing-function:cubic-bezier(.59,1.39,.37,1.01);width:0}.aselect .selector .expanded[data-v-00b8efae]{transform:rotate(180deg) translateY(2px)}.aselect .selector .label[data-v-00b8efae]{color:#fff;display:block;font-size:16px;padding:12px}.aselect ul[data-v-00b8efae]{background:#fff;border:1px solid #dcdcdc;font-size:16px;list-style-type:none;margin:0;padding:0;position:absolute;width:100%;z-index:1}.aselect li[data-v-00b8efae]{color:#000;padding:12px}.aselect li[data-v-00b8efae]:hover{background:#66c0f4;color:#fff}.aselect .current[data-v-00b8efae]{background:#eaeaea}.aselect .hidden[data-v-00b8efae]{visibility:hidden}.aselect .visible[data-v-00b8efae]{visibility:visible}",""]);const i=o},8005:(e,t,a)=>{a.d(t,{Z:()=>i});var n=a(3645),o=a.n(n)()((function(e){return e[1]}));o.push([e.id,"body[data-v-126e3744]{background:#4682b4}.aselect[data-v-126e3744]{margin:20px auto;width:135px}.aselect .selector[data-v-126e3744]{background:transparent;border:2px #dcdcdc;border-radius:4px;position:relative}.aselect .selector .label[data-v-126e3744]{color:#171a21;display:block;font-size:16px;padding:12px}.aselect .selector[data-v-126e3744] :hover{color:#12a5d9}.aselect ul[data-v-126e3744]{background:#fff;border:1px solid #dcdcdc;font-size:16px;list-style-type:none;margin:0;padding:0;position:absolute;width:100%;z-index:10!important}.aselect li[data-v-126e3744]{color:#000;padding:12px}.aselect li[data-v-126e3744]:hover{background:#66c0f4;color:#fff!important}.aselect .current[data-v-126e3744]{background:#eaeaea}.aselect .hidden[data-v-126e3744]{visibility:hidden}.aselect .visible[data-v-126e3744]{visibility:visible}",""]);const i=o},9382:(e,t,a)=>{a.d(t,{Z:()=>i});var n=a(3645),o=a.n(n)()((function(e){return e[1]}));o.push([e.id,"@media (min-width:640px){#h4Basura{margin-left:21%}#inputBasura{float:right;width:78%}}",""]);const i=o},3254:(e,t,a)=>{a.d(t,{Z:()=>i});var n=a(3645),o=a.n(n)()((function(e){return e[1]}));o.push([e.id,"@media (max-width:768px){.empresa-name{display:none}}ul{font-weight:600}",""]);const i=o},5486:(e,t,a)=>{a.d(t,{Z:()=>i});var n=a(3645),o=a.n(n)()((function(e){return e[1]}));o.push([e.id,"@media (min-width:768px){#cuentaBasis{flex-basis:20%;margin-left:auto}}.addButton>.p-column-header-content,.balance_assets>.p-column-header-content,.balance_debit>.p-column-header-content{align-items:right;display:inline-flex;margin-left:auto}td.addButton,td.balance_assets,td.balance_debit{display:inline!important;text-align:right!important}.p-datatable-tfoot>tr>td.addButton,.p-datatable-tfoot>tr>td.balance_assets,.p-datatable-tfoot>tr>td.balance_debit{align-items:right;display:inline-flex;display:inline!important;margin-left:auto;text-align:right!important}input::-webkit-inner-spin-button,input::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}input[type=number]{-moz-appearance:textfield}",""]);const i=o},2461:(e,t,a)=>{a.r(t),a.d(t,{default:()=>P});var n=a(6598),o={class:"px-2 mt-5"},i={class:"w-11/12 ml-auto mr-auto mt-2 transform"},l={class:"flex"},r={class:"text-2xl text-white"},s={class:"flex ml-auto items-center"},c=[(0,n.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"white",viewBox:"0 0 16 16"},[(0,n.createElementVNode)("path",{d:"M15.683 3a2 2 0 0 0-2-2h-7.08a2 2 0 0 0-1.519.698L.241 7.35a1 1 0 0 0 0 1.302l4.843 5.65A2 2 0 0 0 6.603 15h7.08a2 2 0 0 0 2-2V3zM5.829 5.854a.5.5 0 1 1 .707-.708l2.147 2.147 2.146-2.147a.5.5 0 1 1 .707.708L9.39 8l2.146 2.146a.5.5 0 0 1-.707.708L8.683 8.707l-2.147 2.147a.5.5 0 0 1-.707-.708L7.976 8 5.829 5.854z"})],-1)],d=[(0,n.createElementVNode)("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[(0,n.createElementVNode)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)],u=[(0,n.createElementVNode)("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[(0,n.createElementVNode)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})],-1)],p=[(0,n.createElementVNode)("svg",{class:"w-6 h-6",fill:"none",stroke:"white",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[(0,n.createElementVNode)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)],m={class:"w-11/12 ml-auto mr-auto px-2"},h={class:"grid grid-cols-1 sm:grid-cols-5 text-white"},f={class:"col-span-1 mt-3"},b=(0,n.createElementVNode)("h4",{class:"text-base font-semibold"},"Serie",-1),v=["value"],g={class:"col-span-1 mt-3"},y=(0,n.createElementVNode)("h4",{class:"text-base font-semibold"},"Fecha",-1),w={class:"col-span-1 mt-3"},x=(0,n.createElementVNode)("h4",{class:"text-base font-semibold"},"Estado",-1),N=["value"],k={class:"col-span-1 mt-3"},E=(0,n.createElementVNode)("h4",{class:"text-base font-semibold"},"Tipo de Comprobante",-1),V=[(0,n.createStaticVNode)('<option value="1">Ingreso</option><option value="2">Egreso</option><option value="3">Traspaso</option><option value="4">Apertura</option><option value="5">Ajuste</option>',5)],_={class:"col-span-1 mt-3"},D=(0,n.createElementVNode)("h4",{id:"h4Basura",class:"text-base font-semibold"}," Tipo de Cambio ",-1),C={class:"col-span-1 mt-3"},B=(0,n.createElementVNode)("h4",{class:"text-base font-semibold"},"Moneda",-1),S=["value"],A=["value"],I={class:"col-span-2 mt-3"},T=(0,n.createElementVNode)("h4",{class:"text-base font-semibold"},"Glosa",-1);var M=a(9669),R=a.n(M),Z=a(6290),z=a(7915),j=a(3638),U=a(8223),O=a(1678),F=a(8642),L=a(4443);a(9680);function G(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return H(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return H(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,r=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return l=e.done,e},e:function(e){r=!0,i=e},f:function(){try{l||null==a.return||a.return()}finally{if(r)throw i}}}}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}const q={directives:{tooltip:z.Z},components:{Navbar:Z.default,TableDetailReceipt:j.default,Calendar:U.Z},emits:["hideThis"],props:{receipt:{type:Object,required:!1},receiptCount:{type:Number,required:!0},id_company:{type:Number,required:!0},id_user:{type:Number,required:!0}},data:function(){return{createOrEdit:"create",company:{},userData:{},exchange:"",coins:[],selectedCoin:0,serial:"",status:"Abierto",date:"",comment:"",receipt_type:1,details:[],actionButtons:!1,editMode:"cell"}},mounted:function(){this.setData()},watch:{receipt:{handler:function(){this.setData()},deep:!0}},methods:{goReport:function(){window.open("http://reportes.queeserp.tk/flow.html?_flowId=viewReportFlow&_flowId=viewReportFlow&ParentFolderUri=%2Fthemes%2FReportes&reportUnit=%2Fthemes%2FReportes%2FReporteComprobante&standAlone=true&idd_user=".concat(this.id_user,"&id_company=").concat(this.id_company,"&serial_number=").concat(this.serial,"&j_username=jasperadmin&j_password=bitnami&sessionDecorator=no"))},disableComponents:function(){for(var e=document.getElementsByTagName("input"),t=0;t<e.length;t++)e[t].disabled=!0,e[t].style.color="white";for(var a=document.getElementsByClassName("p-button p-component p-button-icon-only p-datepicker-trigger"),n=0;n<a.length;n++)a[n].disabled=!0;for(var o=document.getElementsByTagName("select"),i=0;i<o.length;i++)o[i].disabled=!0,o[i].style.color="black";var l,r=G(document.getElementsByClassName("p-datatable-header"));try{for(r.s();!(l=r.n()).done;){l.value.style.display="none"}}catch(e){r.e(e)}finally{r.f()}"Anulado"==this.status?document.getElementById("trash_receipt").disabled=!0:"Abierto"==this.status&&(document.getElementById("trash_receipt").disabled=!1),document.getElementById("showCreate").style.display="none",document.getElementById("showReport").style.display="initial",this.editMode=null,this.actionButtons=!0},validateData:function(){return O.Notify.init({clickToClose:!0}),this.details.length<2?(O.Notify.failure("Debes agregar al menos 2 detalles"),!0):0!=this.details.reduce((function(e,t){return e+Number(t.balance_assets)}),0)-this.details.reduce((function(e,t){return e+Number(t.balance_debit)}),0)?(O.Notify.failure("La suma de todos los Debe debe ser igual a la suma de todos los Haber"),!0):""==this.comment?(O.Notify.failure("Introduce una glosa"),!0):0==this.selectedCoin&&(O.Notify.failure("Selecciona una moneda"),!0)},returnStatus:function(e){switch(e){case 0:return"Cerrado";case 1:return"Abierto";case 2:return"Anulado";default:return""}},setData:function(){if(console.log("Datos compania",this.id_company),Object.keys(this.receipt).length>0)this.status=this.returnStatus(this.receipt.status),this.receipt_type=this.transformReceipt_type(this.receipt.receipt_type),this.serial=this.receipt.serial_number,this.date=this.receipt.date,this.selectedCoin=this.receipt.name,this.comment=this.receipt.comment,this.exchange=this.receipt.TC,this.disableComponents();else{document.getElementById("trash_receipt").disabled=!0,document.getElementById("showReport").style.display="none",this.serial=this.receiptCount+1,this.status=this.returnStatus(1),this.getSelectedCoinsByCompany(this.id_company);var e=new Date;this.date=e}},transformReceipt_type:function(e){switch(e){case"Ingreso":return 1;case"Egreso":return 2;case"Traspaso":return 3;case"Apertura":return 4;case"Ajuste":return 5}},setDetails:function(e){this.details=e},restrictDecimal:function(){this.exchange=this.exchange.match(/^\d+\.?\d{0,2}/)[0]},backToTable:function(){this.$emit("hideThis")},getSelectedCoinsByCompany:function(e){var t=this;R().post(route("coincompany.api.getByCompanyId",{id_company:e})).then((function(e){var a=e.data.coins.find((function(e){return 1==e.active}));console.log("Active",a),t.selectedCoin=a.id_maincoin,t.coins=[{value:a.id_maincoin,text:"".concat(a.m_name," (").concat(a.m_initials,")")},{value:a.id_alternativecoin,text:"".concat(a.a_name," (").concat(a.a_initials,")")}],t.exchange=a.exchange}))},addReceipt:function(){var e=this;if(!this.validateData()){var t=this.date,a=String(t.getDate()).padStart(2,"0"),n=String(t.getMonth()+1).padStart(2,"0"),o=t.getFullYear();t=o+"/"+n+"/"+a,R().post(route("receipt.api.create"),{serial_number:this.serial,comment:this.comment,date:t,TC:this.exchange,receipt_type:this.receipt_type,id_company:this.id_company,id_coin:this.selectedCoin,details:this.details}).then((function(t){t.data.success&&(O.Notify.success("Comprobante creado con éxito"),localStorage.removeItem("detailsReceipt"),e.disableComponents())})).catch((function(e){O.Notify.failure(e.response.data.message)}))}},deleteReceipt:function(){var e=this;F.Confirm.init({titleColor:"#FF0000",messageColor:"#FF0000",okButtonBackground:"#FF0000"}),F.Confirm.show("¿Deseas anular el comprobante?","Estás a punto de anular el comprobante Número:"+this.serial,"Eliminar","Cancelar",(function(){L.Loading.standard({clickToClose:!1,svgSize:"200"});var t={serial:e.serial,id_company:e.id_company,id_user:e.id_user};O.Notify.init({clickToClose:!0}),R().post(route("receipt.api.delete"),t).then((function(t){var a;null!==(a=t.data)&&void 0!==a&&a.success?(e.$emit("update-data"),O.Notify.success("Comprobante anulado"),e.status="Anulado",e.disableComponents()):O.Notify.failure(t.data.message),L.Loading.remove(250)})).catch((function(e){console.error(e),O.Notify.failure("Error al eliminar el comprobante")}))}))},editReceipt:function(){}}};var $=a(3379),J=a.n($),K=a(9382),Y={insert:"head",singleton:!1};J()(K.Z,Y);K.Z.locals;const P=(0,a(3744).Z)(q,[["render",function(e,t,a,M,R,Z){var z=(0,n.resolveComponent)("Calendar"),j=(0,n.resolveComponent)("TableDetailReceipt"),U=(0,n.resolveDirective)("tooltip");return(0,n.openBlock)(),(0,n.createElementBlock)(n.Fragment,null,[(0,n.createElementVNode)("div",o,[(0,n.createElementVNode)("div",i,[(0,n.createElementVNode)("div",l,[(0,n.createElementVNode)("h4",r,(0,n.toDisplayString)(Object.keys(a.receipt).length>0?"Editando comprobante N# ".concat(a.receipt.serial_number):"Creando comprobante"),1),(0,n.createElementVNode)("div",s,[(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)("button",{class:"bg-sky-600 hover:bg-sky-700 text-white font-medium rounded-lg text-sm px-3 py-3 text-center mr-2",onClick:t[0]||(t[0]=function(){return Z.backToTable&&Z.backToTable.apply(Z,arguments)})},c)),[[U,{value:"Volver a la tabla",class:"text-center"},void 0,{bottom:!0}]]),(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)("button",{class:(0,n.normalizeClass)(Object.keys(a.receipt).length>0?" text-white bg-yellow-500 hover:bg-yellow-600 font-medium rounded-lg text-sm px-2 py-2 text-center mr-2":"text-white bg-green-500 hover:bg-green-600 font-medium rounded-lg text-sm px-2 py-2 text-center mr-2"),onClick:t[1]||(t[1]=function(e){return Object.keys(a.receipt).length>0?Z.editReceipt():Z.addReceipt()}),id:"showCreate"},d,2)),[[U,{value:Object.keys(a.receipt).length>0?"Crear nuevo comprobante":"Crear comprobante",class:"text-center"},void 0,{bottom:!0}]]),(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)("button",{onClick:t[2]||(t[2]=function(){return Z.goReport&&Z.goReport.apply(Z,arguments)}),class:"disabled:bg-indigo-800 bg-indigo-700 hover:bg-indigo-600 text-white font-medium rounded-lg text-sm px-2 py-2 text-center mr-2",id:"showReport"},u)),[[U,{value:"Generar reporte",class:"text-center"},void 0,{bottom:!0}]]),(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)("button",{id:"trash_receipt",class:"text-white disabled:bg-red-800 bg-red-500 hover:bg-red-600 font-medium rounded-lg text-sm px-2 py-2 text-center",onClick:t[3]||(t[3]=function(e){return Z.deleteReceipt()})},p)),[[U,{value:"Anular Comprobante",class:"text-center"},void 0,{bottom:!0}]])])])])]),(0,n.createElementVNode)("div",m,[(0,n.createElementVNode)("div",h,[(0,n.createElementVNode)("div",f,[b,(0,n.createElementVNode)("input",{disabled:"",class:"disabled text-base font-medium border rounded w-6/12 h-9 py-3 px-3 text-white",value:R.serial},null,8,v)]),(0,n.createElementVNode)("div",g,[y,(0,n.createVNode)(z,{class:"text-base font-medium border rounded w-6/12 h-9 text-black",dateFormat:"dd/mm/yy",showIcon:!0,modelValue:R.date,"onUpdate:modelValue":t[4]||(t[4]=function(e){return R.date=e})},null,8,["modelValue"])]),(0,n.createElementVNode)("div",w,[x,(0,n.createElementVNode)("input",{disabled:"",class:"text-base font-medium border rounded w-6/12 h-9 py-3 px-3 text-white",value:R.status},null,8,N)]),(0,n.createElementVNode)("div",k,[E,(0,n.withDirectives)((0,n.createElementVNode)("select",{class:"text-base font-medium border rounded w-8/12 h-9 px-3 text-black","onUpdate:modelValue":t[5]||(t[5]=function(e){return R.receipt_type=e})},V,512),[[n.vModelSelect,R.receipt_type]])]),(0,n.createElementVNode)("div",_,[D,(0,n.withDirectives)((0,n.createElementVNode)("input",{id:"inputBasura",style:{"text-align":"right"},onkeypress:"return /[0-9 .]/i.test(event.key)",class:"text-base font-medium border rounded h-9 py-3 px-3 text-black","onUpdate:modelValue":t[6]||(t[6]=function(e){return R.exchange=e}),onInput:t[7]||(t[7]=function(){return Z.restrictDecimal&&Z.restrictDecimal.apply(Z,arguments)})},null,544),[[n.vModelText,R.exchange]])]),(0,n.createElementVNode)("div",C,[B,!Object.keys(this.receipt).length>0?(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)("select",{key:0,class:"font-medium border rounded w-100 h-9 px-3 text-black","onUpdate:modelValue":t[8]||(t[8]=function(e){return R.selectedCoin=e})},[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(R.coins,(function(e,t){return(0,n.openBlock)(),(0,n.createElementBlock)("option",{key:t,value:e.value},(0,n.toDisplayString)(e.text),9,S)})),128))],512)),[[n.vModelSelect,R.selectedCoin]]):((0,n.openBlock)(),(0,n.createElementBlock)("input",{key:1,class:"font-medium border rounded w-100 h-9 px-3 text-black",type:"text",value:a.receipt.name},null,8,A))]),(0,n.createElementVNode)("div",I,[T,(0,n.withDirectives)((0,n.createElementVNode)("input",{class:"text-base font-medium border rounded w-9/12 h-9 py-3 px-3 text-black",placeholder:"Ingresa una glosa","onUpdate:modelValue":t[9]||(t[9]=function(e){return R.comment=e}),maxlength:"200"},null,512),[[n.vModelText,R.comment]])])])]),(0,n.createVNode)(j,{receiptData:a.receipt,onDetailsReceipt:Z.setDetails,glosa:R.comment,actionButtons:R.actionButtons,editMode:R.editMode},null,8,["receiptData","onDetailsReceipt","glosa","actionButtons","editMode"])],64)}]])},4759:(e,t,a)=>{a.r(t),a.d(t,{default:()=>f});var n=a(6598),o={id:"app"},i=["data-value","data-list"],l={class:"label"},r={class:"cursor-pointer"},s=["onClick"];var c=a(9680);const d={props:{value:{type:String,default:"Opciones"},list:{type:Array,default:[["Valor","Enlace"],["Valor","Enlace"],["Valor","Enlace"]]}},data:function(){return{visible:!1}},methods:{toggle:function(){this.visible=!this.visible},takeMeTo:function(e){"logout"==e&&(history.pushState(null,document.title,location.href),window.addEventListener("popstate",(function(e){console.log(e),history.pushState(null,document.title,location.href)})),window.location.href=route("logout")),c.Inertia.get(route(e))}}};var u=a(3379),p=a.n(u),m=a(7707),h={insert:"head",singleton:!1};p()(m.Z,h);m.Z.locals;const f=(0,a(3744).Z)(d,[["render",function(e,t,a,c,d,u){return(0,n.openBlock)(),(0,n.createElementBlock)("div",o,[(0,n.createElementVNode)("div",{class:"aselect","data-value":a.value,"data-list":a.list},[(0,n.createElementVNode)("div",{class:"cursor-pointer selector",onClick:t[0]||(t[0]=function(e){return u.toggle()})},[(0,n.createElementVNode)("div",l,[(0,n.createElementVNode)("button",null,[(0,n.createElementVNode)("span",null,(0,n.toDisplayString)(a.value),1)])]),(0,n.createElementVNode)("div",{class:(0,n.normalizeClass)(["arrow",{expanded:d.visible}])},null,2),(0,n.createElementVNode)("div",{class:(0,n.normalizeClass)({hidden:!d.visible,visible:d.visible})},[(0,n.createElementVNode)("ul",r,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(a.list,(function(e){return(0,n.openBlock)(),(0,n.createElementBlock)("li",{class:(0,n.normalizeClass)({current:e===a.value}),key:e,onClick:function(t){return u.takeMeTo(e[1])}},(0,n.toDisplayString)(e[0]),11,s)})),128))])],2)])],8,i)])}],["__scopeId","data-v-00b8efae"]])},6290:(e,t,a)=>{a.r(t),a.d(t,{default:()=>w});var n=a(6598),o={class:"flex flex-wrap items-center justify-between w-full py-4 md:py-0 px-4 text-lg text-gray-700 bg-white"},i={class:"grid auto-cols-min grid-cols-2 w-4/12"},l={class:"col"},r={class:"col text-base sm:w-96"},s={class:"empresa-name font-semibold",style:{color:"#171a21"}},c=[(0,n.createElementVNode)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},null,-1)],d={class:"hidden w-full md:flex md:items-center md:w-auto",id:"menu"},u={class:"pt-4 text-base text-gray-900 md:flex md:justify-between md:pt-0"};var p=a(4759),m=a(9680),h=a(3613);const f={components:{DropDownUser:p.default,TransparentDropDown:h.default},props:{userName:{type:String,default:""},companyName:{type:String,default:""}},methods:{toggleMenu:function(){document.getElementById("menu").classList.toggle("hidden")},changeCompany:function(){m.Inertia.get(route("companies"))},dashboard:function(){m.Inertia.get(route("dashboard",decodeURI(window.location.pathname.split("/").pop())))},joinManagement:function(){m.Inertia.get(route("date.management",decodeURI(window.location.pathname.split("/").pop())))},joinAccount:function(){m.Inertia.get(route("accounts",decodeURI(window.location.pathname.split("/").pop())))}}};var b=a(3379),v=a.n(b),g=a(3254),y={insert:"head",singleton:!1};v()(g.Z,y);g.Z.locals;const w=(0,a(3744).Z)(f,[["render",function(e,t,a,p,m,h){var f=(0,n.resolveComponent)("TransparentDropDown"),b=(0,n.resolveComponent)("DropDownUser");return(0,n.openBlock)(),(0,n.createElementBlock)("header",null,[(0,n.createElementVNode)("nav",o,[(0,n.createElementVNode)("div",i,[(0,n.createElementVNode)("div",l,[(0,n.createElementVNode)("a",null,[(0,n.createElementVNode)("img",{onClick:t[0]||(t[0]=function(){return h.dashboard&&h.dashboard.apply(h,arguments)}),src:"https://queeserp.tk/images/queeserp.svg",alt:"Logo que es erp",class:"md:w-48 md:mr-8 cursor-pointer"})])]),(0,n.createElementVNode)("div",r,[(0,n.createElementVNode)("p",s,(0,n.toDisplayString)(a.companyName),1)])]),((0,n.openBlock)(),(0,n.createElementBlock)("svg",{onClick:t[1]||(t[1]=function(){return h.toggleMenu&&h.toggleMenu.apply(h,arguments)}),xmlns:"http://www.w3.org/2000/svg",id:"menu-button",class:"h-6 w-6 cursor-pointer md:hidden block",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},c)),(0,n.createElementVNode)("div",d,[(0,n.createElementVNode)("ul",u,[(0,n.createVNode)(f,{list:[["Reporte de Libro Diario","reportld.api.read",a.companyName],["Reporte de Libro Mayor","reportlm.api.read",a.companyName],["Reporte de Balance Inicial","reportbi.api.read",a.companyName],["Comprobación de Sumas y Saldos","reportss.api.read",a.companyName]],value:"Reportes"},null,8,["list"]),(0,n.createVNode)(f,{list:[["Artículos","items",a.companyName],["Categorías","categories",a.companyName],["Notas","notes",a.companyName]],value:"Inventario"},null,8,["list"]),(0,n.createVNode)(f,{list:[["Gestión","date.management",a.companyName],["Moneda","exchange_rate",a.companyName]],value:"Configuración"},null,8,["list"]),(0,n.createVNode)(f,{list:[["Cuentas","accounts",a.companyName],["Configurar Integración","accounts_config",a.companyName],["Comprobante","receipt",a.companyName]],value:"Contabilidad"},null,8,["list"]),(0,n.createVNode)(b,{list:[["Cambiar Empresa","companies"],["Cerrar Sesión","logout"]],value:"Preferencias"})])])])])}]])},3638:(e,t,a)=>{a.r(t),a.d(t,{default:()=>z});var n=a(6598),o={class:"px-2 mt-5"},i={class:"w-11/12 ml-auto mr-auto mt-2 transform"},l={class:"md:flex md:items-center justify-center md:justify-items-start md:flex-row inline-grid gap-2 ml-auto mr-auto"},r={id:"cuentaBasis",class:"bg-white text-black rounded-md"},s=(0,n.createTextVNode)(" No hay cuentas. "),c={class:"relative md:basis-1/3 text-gray-600 focus-within:text-gray-400"},d={class:"absolute inset-y-0 left-0 flex items-center pl-2"},u=["fill"],p=[(0,n.createElementVNode)("path",{d:"M14.5 3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-13a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h13zm-13-1A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-13z"},null,-1),(0,n.createElementVNode)("path",{d:"M3 5.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zM3 8a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9A.5.5 0 0 1 3 8zm0 2.5a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5z"},null,-1)],m={class:"relative md:basis-1/4 text-gray-600 focus-within:text-gray-400"},h=["disabled"],f={class:"relative md:basis-1/4 text-gray-600 focus-within:text-gray-400"},b=["disabled"],v=(0,n.createTextVNode)(" No hay detalles de comprobantes, ¡añade uno!"),g={class:"flex content-left w-full"},y={class:"flex content-center w-full"},w=[(0,n.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"white",class:"bi bi-plus-lg",viewBox:"0 0 16 16"},[(0,n.createElementVNode)("path",{"fill-rule":"evenodd",d:"M8 2a.5.5 0 0 1 .5.5v5h5a.5.5 0 0 1 0 1h-5v5a.5.5 0 0 1-1 0v-5h-5a.5.5 0 0 1 0-1h5v-5A.5.5 0 0 1 8 2Z"})],-1)],x=(0,n.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-x-lg",viewBox:"0 0 16 16"},[(0,n.createElementVNode)("path",{"fill-rule":"evenodd",d:"M13.854 2.146a.5.5 0 0 1 0 .708l-11 11a.5.5 0 0 1-.708-.708l11-11a.5.5 0 0 1 .708 0Z"}),(0,n.createElementVNode)("path",{"fill-rule":"evenodd",d:"M2.146 2.146a.5.5 0 0 0 0 .708l11 11a.5.5 0 0 0 .708-.708l-11-11a.5.5 0 0 0-.708 0Z"})],-1);var N=a(922),k=a(5247),E=a(6076),V=a(9669),_=a.n(V),D=a(7915),C=a(9938),B=a.n(C),S=a(4325),A=a(1678);a(6441);const I={props:{receiptData:{type:Object,default:null},glosa:{type:String,default:null},actionButtons:{type:Boolean,default:!1},editMode:{type:String,default:null}},emits:["detailsReceipt"],directives:{tooltip:D.Z},components:{Button:S.Z,DataTable:N.Z,Column:k.Z,vSelect:B(),InputText:E.Z},data:function(){return{companyLevel:null,copyGlosa:!0,accountsOptions:[],newDetail:{id_account:null,glosa:null,balance_debit:0,balance_assets:0},idSelectedAccount:null,receipts:[],coinCompanyData:[],selectedReceipt:[],filters:{id_coincompany:"",id_account:"",comment:"",balance_debit:"",balance_assets:""},accounts:[],ignoreThisAccounts:[]}},methods:{restrictDecimal:function(e){var t=e.toString().match(/^\d+\.?\d{0,2}/);return t?t[0]:e},isNumber:function(e){var t=(e=e||window.event).which?e.which:e.keyCode;if(!(t>31&&(t<48||t>57)&&46!==t))return!0;e.preventDefault()},deleteThisItem:function(e){var t=this,a=this.ignoreThisAccounts.find((function(a){return a==t.receipts[e].id_account}));a&&this.ignoreThisAccounts.splice(this.ignoreThisAccounts.indexOf(a),1),this.setAccounts(),this.receipts.splice(e,1),localStorage.setItem("detailsReceipt",JSON.stringify(this.receipts))},calculateAssets:function(){return this.receipts.reduce((function(e,t){return e+Number(t.balance_assets)}),0)},calculateDebit:function(){return this.receipts.reduce((function(e,t){return e+Number(t.balance_debit)}),0)},onCellEditComplete:function(e){if(""!=e.newData.comment.trim())if(isNaN(e.newData.balance_debit)||isNaN(e.newData.balance_assets)||""===e.newData.balance_assets||""===e.newData.balance_debit||0==e.newData.balance_debit&&0==e.newData.balance_assets)A.Notify.failure("El número debe ser mayor a 0");else{var t=this.receipts.findIndex((function(t){return t.id_account==e.data.id_account&&t.comment==e.data.comment&&t.balance_debit==e.data.balance_debit&&t.balance_assets==e.data.balance_assets}));this.receipts[t]=e.newData,this.newDetail.comment=this.receipts[t].comment,this.receipts[t].balance_debit>0&&e.newValue==this.receipts[t].balance_debit&&(this.receipts[t].balance_assets=0,this.receipts[t].balance_debit=parseFloat(this.receipts[t].balance_debit)),this.receipts[t].balance_assets>0&&e.newValue==this.receipts[t].balance_assets&&(this.receipts[t].balance_debit=0,this.receipts[t].balance_assets=parseFloat(this.receipts[t].balance_assets))}else A.Notify.failure("Ingresa una glosa")},getReceipts:function(){var e=this;this.receiptData.id_receipt?_().get(route("receiptdetails.api.read",this.receiptData.id_receipt)).then((function(t){console.log("Recibos",t.data),e.receipts=t.data})):this.setIfExist()},setIfExist:function(){this.receipts=localStorage.getItem("detailsReceipt")?JSON.parse(localStorage.getItem("detailsReceipt")):[],this.$emit("detailsReceipt",this.receipts),this.ignoreThisAccounts=localStorage.getItem("ignoredAccounts")?JSON.parse(localStorage.getItem("ignoredAccounts")):[]},addReceiptDetail:function(){var e=this;null!=this.idSelectedAccount&&""!=this.idSelectedAccount?0!=this.newDetail.balance_debit||0!=this.newDetail.balance_assets?this.newDetail.balance_debit>0&&this.newDetail.balance_assets>0?A.Notify.failure("Uno de los 2 debe ser mayor a cero y el otro 0."):(""==this.newDetail.balance_debit&&(this.newDetail.balance_debit=0),""==this.newDetail.balance_assets&&(this.newDetail.balance_assets=0),null!=this.newDetail.comment&&""!==this.newDetail.comment.trim()?(this.newDetail.id_account=this.idSelectedAccount.value,this.newDetail.name_account=this.idSelectedAccount.label,this.receipts.push(this.newDetail),this.newDetail={id_account:null,comment:this.newDetail.comment,balance_debit:0,balance_assets:0},this.ignoreThisAccounts.push(this.idSelectedAccount.value),this.accountsOptions=this.accountsOptions.filter((function(t){return t.value!=e.idSelectedAccount.value})),this.idSelectedAccount=""):A.Notify.failure("Ingresa una glosa")):A.Notify.failure("Debe o haber deben ser mayor a cero"):A.Notify.failure("Selecciona una cuenta")},setAccounts:function(){var e=this;this.accountsOptions=this.accounts.filter((function(t){return!e.ignoreThisAccounts.includes(t.id_account)&&t.level==e.companyLevel})),this.accountsOptions=this.accountsOptions.map((function(e){return{value:e.id_account,label:"".concat(e.code," - ").concat(e.name)}}))},getAccounts:function(){var e=this,t=window.location.pathname.split("/").pop();console.log(t),_().get(route("accounts.api.read",t)).then((function(t){e.accounts=t.data.company.accounts,e.companyLevel=t.data.company.level,e.setAccounts()}))}},watch:{receiptData:function(e){console.log("id_receipt",e.id_receipt),e&&this.getReceipts()},glosa:function(e){this.copyGlosa&&(this.newDetail.comment=e)}},mounted:function(){this.getAccounts(),this.getReceipts()}};var T=a(3379),M=a.n(T),R=a(5486),Z={insert:"head",singleton:!1};M()(R.Z,Z);R.Z.locals;const z=(0,a(3744).Z)(I,[["render",function(e,t,a,N,k,E){var V=(0,n.resolveComponent)("vSelect"),_=(0,n.resolveComponent)("Column"),D=(0,n.resolveComponent)("InputText"),C=(0,n.resolveComponent)("Button"),B=(0,n.resolveComponent)("DataTable"),S=(0,n.resolveDirective)("tooltip");return(0,n.openBlock)(),(0,n.createElementBlock)("div",o,[(0,n.createElementVNode)("div",i,[(0,n.createVNode)(B,{resizableColumns:!0,columnResizeMode:"fit",class:"p-datatable-sm",value:k.receipts,dataKey:"id_coincompany",scrollable:!0,scrollHeight:"350px",responsiveLayout:"scroll",filters:k.filters,"onUpdate:filters":t[10]||(t[10]=function(e){return k.filters=e}),editMode:a.editMode,onCellEditComplete:E.onCellEditComplete},{header:(0,n.withCtx)((function(){return[(0,n.createElementVNode)("div",l,[(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)("div",r,[(0,n.createVNode)(V,{modelValue:k.idSelectedAccount,"onUpdate:modelValue":t[0]||(t[0]=function(e){return k.idSelectedAccount=e}),options:k.accountsOptions,placeholder:"Selecciona una cuenta"},{"no-options":(0,n.withCtx)((function(){return[s]})),_:1},8,["modelValue","options"])])),[[S,"Seleccione una cuenta"]]),(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)("div",c,[(0,n.createElementVNode)("span",d,[(0,n.createElementVNode)("button",{onClick:t[1]||(t[1]=function(){return k.copyGlosa&&k.copyGlosa.apply(k,arguments)})},[((0,n.openBlock)(),(0,n.createElementBlock)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:k.copyGlosa?"#2196f3":"#bdbdbd",class:"bi bi-card-text",viewBox:"0 0 16 16"},p,8,u))])]),(0,n.withDirectives)((0,n.createElementVNode)("input",{"onUpdate:modelValue":t[2]||(t[2]=function(e){return k.newDetail.comment=e}),placeholder:"Añade una glosa",class:"w-full py-2 text-sm rounded-md pl-10 focus:outline-none focus:bg-white focus:text-gray-900",maxlength:"100"},null,512),[[n.vModelText,k.newDetail.comment]])])),[[S,"Glosa para el detalle"]]),(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)("div",m,[(0,n.withDirectives)((0,n.createElementVNode)("input",{style:{"text-align":"right"},type:"number","onUpdate:modelValue":t[3]||(t[3]=function(e){return k.newDetail.balance_debit=e}),onKeypress:t[4]||(t[4]=function(e){return E.isNumber(e)}),onInput:t[5]||(t[5]=function(e){return k.newDetail.balance_debit=E.restrictDecimal(k.newDetail.balance_debit)}),disabled:k.newDetail.balance_assets>0,placeholder:"Debe",class:"w-full py-2 text-sm rounded-md pr-3 focus:outline-none focus:bg-white focus:text-gray-900"},null,40,h),[[n.vModelText,k.newDetail.balance_debit]])])),[[S,"Debe para el detalle",void 0,{top:!0}]]),(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)("div",f,[(0,n.withDirectives)((0,n.createElementVNode)("input",{style:{"text-align":"right"},type:"number","onUpdate:modelValue":t[6]||(t[6]=function(e){return k.newDetail.balance_assets=e}),onKeypress:t[7]||(t[7]=function(e){return E.isNumber(e)}),onInput:t[8]||(t[8]=function(e){return k.newDetail.balance_assets=E.restrictDecimal(k.newDetail.balance_assets)}),disabled:k.newDetail.balance_debit>0,placeholder:"Haber",class:"py-2 text-sm rounded-md pr-3 w-full focus:outline-none focus:bg-white focus:text-gray-900"},null,40,b),[[n.vModelText,k.newDetail.balance_assets]])])),[[S,"Haber para el detalle",void 0,{top:!0}]])])]})),empty:(0,n.withCtx)((function(){return[v]})),default:(0,n.withCtx)((function(){return[(0,n.createVNode)(_,{field:"name_account",header:"Cuenta"},{body:(0,n.withCtx)((function(e){return[(0,n.createElementVNode)("div",g,[(0,n.createElementVNode)("p",null,(0,n.toDisplayString)(e.data[e.field]),1)])]})),_:1}),(0,n.createVNode)(_,{field:"comment",header:"Glosa"},{editor:(0,n.withCtx)((function(e){return[(0,n.createVNode)(D,{modelValue:e.data[e.field],"onUpdate:modelValue":function(t){return e.data[e.field]=t},maxlength:"100"},null,8,["modelValue","onUpdate:modelValue"])]})),_:1}),(0,n.createVNode)(_,{class:"balance_debit",field:"balance_debit",header:"Debe",footerStyle:"",footer:"Total: ".concat(E.calculateDebit())},{editor:(0,n.withCtx)((function(e){return[(0,n.createElementVNode)("div",y,[(0,n.createVNode)(D,{maxlength:"12",type:"text",class:"text-right mx-auto",modelValue:e.data[e.field],"onUpdate:modelValue":function(t){return e.data[e.field]=t},onInput:function(t){return e.data[e.field]=E.restrictDecimal(e.data[e.field])}},null,8,["modelValue","onUpdate:modelValue","onInput"])])]})),_:1},8,["footer"]),(0,n.createVNode)(_,{class:"balance_assets",field:"balance_assets",header:"Haber",footer:"Total: ".concat(E.calculateAssets())},{editor:(0,n.withCtx)((function(e){return[(0,n.createVNode)(D,{maxlength:"12",type:"text",class:"text-right mx-auto",modelValue:e.data[e.field],"onUpdate:modelValue":function(t){return e.data[e.field]=t},onInput:function(t){return e.data[e.field]=E.restrictDecimal(e.data[e.field])}},null,8,["modelValue","onUpdate:modelValue","onInput"])]})),_:1},8,["footer"]),(0,n.createVNode)(_,{class:"addButton",hidden:a.actionButtons,footer:E.calculateAssets()-E.calculateDebit()==0?"✅":"≠"},{header:(0,n.withCtx)((function(){return[(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)("button",{class:"text-white disabled:bg-green-800 bg-green-500 hover:bg-green-600 font-medium rounded-lg text-sm px-2 py-2 text-center mr-2",onClick:t[9]||(t[9]=function(){return E.addReceiptDetail&&E.addReceiptDetail.apply(E,arguments)})},w)),[[S,{value:"Agregar detalle",class:"text-center"},void 0,{bottom:!0}]])]})),body:(0,n.withCtx)((function(e){return[(0,n.createVNode)(C,{type:"button",onClick:function(t){return E.deleteThisItem(e.index)}},{default:(0,n.withCtx)((function(){return[x]})),_:2},1032,["onClick"])]})),_:1},8,["hidden","footer"])]})),_:1},8,["value","filters","editMode","onCellEditComplete"])])])}]])},3613:(e,t,a)=>{a.r(t),a.d(t,{default:()=>v});var n=a(6598),o={id:"app"},i=["data-value","data-list"],l={class:"label"},r={class:"button"},s={class:"font-medium"},c={class:"cursor-pointer"},d=["onClick"];var u=a(9680);const p={props:{value:{type:String,default:"Opciones"},list:{type:Array,default:[["Valor","Enlace"],["Valor","Enlace"],["Valor","Enlace"]]}},data:function(){return{visible:!1}},methods:{mouseover:function(){this.visible=!0},mouseleave:function(){this.visible=!1},takeMeTo:function(e,t){"logout"==e&&(history.pushState(null,document.title,location.href),window.addEventListener("popstate",(function(e){console.log(e),history.pushState(null,document.title,location.href)})),window.location.href=route("logout")),u.Inertia.get(route(e,t))}}};var m=a(3379),h=a.n(m),f=a(8005),b={insert:"head",singleton:!1};h()(f.Z,b);f.Z.locals;const v=(0,a(3744).Z)(p,[["render",function(e,t,a,u,p,m){return(0,n.openBlock)(),(0,n.createElementBlock)("div",o,[(0,n.createElementVNode)("div",{class:"aselect","data-value":a.value,"data-list":a.list},[(0,n.createElementVNode)("div",{class:"cursor-pointer selector",onMouseover:t[0]||(t[0]=function(){return m.mouseover&&m.mouseover.apply(m,arguments)}),onMouseleave:t[1]||(t[1]=function(){return m.mouseleave&&m.mouseleave.apply(m,arguments)})},[(0,n.createElementVNode)("div",l,[(0,n.createElementVNode)("button",r,[(0,n.createElementVNode)("p",s,(0,n.toDisplayString)(a.value),1)])]),(0,n.createElementVNode)("div",{class:(0,n.normalizeClass)({hidden:!p.visible,visible:p.visible})},[(0,n.createElementVNode)("ul",c,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(a.list,(function(e){return(0,n.openBlock)(),(0,n.createElementBlock)("li",{class:(0,n.normalizeClass)({current:e===a.value}),key:e,onClick:function(t){return m.takeMeTo(e[1],e[2])}},(0,n.toDisplayString)(e[0]),11,d)})),128))])],2)],32)],8,i)])}],["__scopeId","data-v-126e3744"]])}}]);