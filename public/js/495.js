"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[495],{5495:(e,t,a)=>{a.r(t),a.d(t,{default:()=>C});var r=a(6598),o={key:0,class:"transition-opacity top-0 left-0 min-h-full min-w-full z-auto bg-black bg-opacity-40 absolute overflow-y-scroll"},s={class:"flex items-center justify-center min-h-screen"},n={class:"relative px-4 w-full max-w-2xl h-full md:h-auto"},d={class:"relative bg-gray-800 rounded-lg shadow"},i={class:"flex justify-between items-start p-3 rounded-t border-b border-gray-500"},l={class:"text-xl font-semibold text-gray-300 lg:text-2xl"},c={class:"p-4 space-y-6"},m={class:"relative z-0 mb-5 w-full group"},u=(0,r.createElementVNode)("label",{for:"name",class:"absolute text-base text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-100 peer-focus:-translate-y-6"},"Nombre Periodo *",-1),p={class:"relative mb-5 z-0 w-full group"},f=(0,r.createElementVNode)("label",{for:"address",class:"block mb-2 text-gray-400"},"Seleccione el rango de fechas:",-1),h={class:"flex items-center"},g=(0,r.createElementVNode)("span",{class:"mx-2 text-gray-400"},"Desde",-1),y=(0,r.createElementVNode)("span",{class:"mr-2 ml-8 text-gray-400"},"Hasta",-1),D={class:"flex items-center p-3 space-x-2 rounded-b border-t border-gray-500"};var b=a(9669),_=a.n(b),w=a(8223),x=a(5090),E=a(7484),v=a.n(E),N=a(6607),Y=a.n(N),V=a(285),k=a.n(V);v().extend(Y()),v().extend(k());const M={directives:{focus:{mounted:function(e){return e.focus()}}},components:{Calendar:w.Z},props:{managementData:{type:Object,default:{}},periodDates:Array,id_management:Number,id_company:Number,id_user:Number,realstartdate:String,realenddate:String,showModal:{type:Boolean,default:!1},modalTitle:String,modalButtons:String,periodData:{type:Object,default:{id_period:"",id_user:"",id_management:"",status:"",start_date:"",end_date:"",name:""}}},watch:{periodData:{handler:function(){this.newData=Object.assign({},this.periodData)}}},data:function(){return{newData:Object.assign({},this.periodData),dates:this.periodDates,errorName:!1,messageErrorName:"",errorStart_date:!1,messageErrorStart_date:"",errorEnd_date:!1,messageErrorEnd_date:"",errorGeneric:!1,messageErrorGeneric:""}},methods:{flushErrors:function(){this.errorName=!1,this.messageErrorName="",this.errorStart_date=!1,this.messageErrorStart_date="",this.errorEnd_date=!1,this.messageErrorEnd_date="",this.errorGeneric=!1,this.messageErrorGeneric=""},cancel:function(){this.$emit("close"),this.newData=Object.assign({},this.periodData),this.flushErrors()},setColorForDate:function(e){for(var t=parseFloat(e.month)+parseFloat(1),a=v()(e.day+"/"+t+"/"+e.year,"D/M/YYYY",!0),r="white",o=0;o<this.periodDates.length;o++){var s=v()(this.periodDates[o].start_date,"DD/MM/YYYY",!0),n=v()(this.periodDates[o].end_date,"DD/MM/YYYY",!0);v()(a).isBetween(s,n,null,"[]")&&(r="red",this.periodDates[o].id_period==this.periodData.id_period&&(r="green"))}return v()(a).isBetween(v()(this.managementData.start_date,"DD/MM/YYYY"),v()(this.managementData.end_date,"DD/MM/YYYY"),null,"[]")||(r="LightCoral"),r},removeEmptyValues:function(e){var t=e;for(var a in t)""!=t[a]&&null!=t[a]||delete t[a];return t},setErrors:function(e,t){for(var a in e)"name"==a&&e[a][0]&&(this.errorName=!0,x.Notify.failure(e[a][0])),"start_date"==a&&e[a][0]&&(this.errorStart_date=!0,x.Notify.failure(e[a][0])),"end_date"==a&&e[a][0]&&(console.log(e[a][0]),this.errorEnd_date=!0,x.Notify.failure(e[a][0]))},create:function(){var e=this;console.log(this.newData);var t={name:this.newData.name,start_date:v()(this.newData.start_date).format("YYYY-MM-DD"),end_date:v()(this.newData.end_date).format("YYYY-MM-DD"),id_management:this.id_management.toString()};x.Notify.init({clickToClose:!0}),_().post(route("period.api.create"),t).catch((function(t){e.flushErrors(),t.response.data.message?1==t.response.data.type?x.Notify.failure(t.response.data.message):e.setErrors(t.response.data.errors,t.response.data.message):1==t.response.data.type?x.Notify.failure("Error al crear"):(e.errorGeneric=!0,e.messageErrorGeneric=t.response.data.message)})).then((function(t){try{var a;null!==(a=t.data)&&void 0!==a&&a.success&&(x.Notify.success("Periodo creado con Ã©xito"),e.$emit("updatePeriods"),e.cancel())}catch(e){console.log("No se pudo completar la peticion")}}))},update:function(){var e=this;console.log(this.newData);var t={id_period:this.newData.id_period,name:this.newData.name,start_date:v()(this.newData.start_date instanceof Date?this.newData.start_date.getTime():v()(this.newData.start_date,"DD/MM/YYYY")).format("YYYY-MM-DD"),end_date:v()(this.newData.end_date instanceof Date?this.newData.end_date.getTime():v()(this.newData.end_date,"DD/MM/YYYY")).format("YYYY-MM-DD"),id_company:this.id_company,realstartdate:this.realstartdate,realenddate:this.realenddate};t=this.removeEmptyValues(t),x.Notify.init({clickToClose:!0}),_().post(route("period.api.update"),t).catch((function(t){e.flushErrors(),t.response.data.message?1==t.response.data.type?x.Notify.failure(t.response.data.message):e.setErrors(t.response.data.errors,t.response.data.message):1==t.response.data.type?x.Notify.failure("Error al actualizar"):(e.errorGeneric=!0,e.messageErrorGeneric=t.response.data.message)})).then((function(t){var a;null!=t&&null!==(a=t.data)&&void 0!==a&&a.success&&(x.Notify.success("Se ha actualizado el periodo"),e.$emit("updatePeriods"),e.$emit("cleanSelectedPeriod"),e.cancel())}))}}};const C=(0,a(3744).Z)(M,[["render",function(e,t,a,b,_,w){var x=(0,r.resolveComponent)("Calendar"),E=(0,r.resolveDirective)("focus");return a.showModal?((0,r.openBlock)(),(0,r.createElementBlock)("div",o,[(0,r.createElementVNode)("div",s,[(0,r.createElementVNode)("div",n,[(0,r.createElementVNode)("div",d,[(0,r.createElementVNode)("div",i,[(0,r.createElementVNode)("h3",l,(0,r.toDisplayString)(a.modalTitle),1)]),(0,r.createElementVNode)("div",c,[(0,r.createElementVNode)("form",null,[(0,r.createElementVNode)("div",m,[(0,r.withDirectives)((0,r.createElementVNode)("input",{autocomplete:"off",type:"text",class:"block py-2.5 px-0 w-full text-xl text-gray-300 bg-transparent border-0 border-b-2 border-gray-300 appearance-none focus:outline-none focus:ring-0 focus:border-blue-600 peer",oninput:"javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);",onkeypress:"return /[A-Z 0-9]/i.test(event.key)",maxlength:"15","onUpdate:modelValue":t[0]||(t[0]=function(e){return _.newData.name=e}),placeholder:" ",required:""},null,512),[[E],[r.vModelText,_.newData.name]]),u]),(0,r.createElementVNode)("div",p,[f,(0,r.createElementVNode)("div",h,[g,(0,r.createVNode)(x,{modelValue:_.newData.start_date,"onUpdate:modelValue":t[1]||(t[1]=function(e){return _.newData.start_date=e}),dateFormat:"dd/mm/yy",baseZIndex:100},{date:(0,r.withCtx)((function(e){return[(0,r.createElementVNode)("p",{style:(0,r.normalizeStyle)("color: "+w.setColorForDate(e.date)+";")},(0,r.toDisplayString)(e.date.day),5)]})),_:1},8,["modelValue"]),y,(0,r.createVNode)(x,{baseZIndex:100,modelValue:_.newData.end_date,"onUpdate:modelValue":t[2]||(t[2]=function(e){return _.newData.end_date=e}),dateFormat:"dd/mm/yy"},{date:(0,r.withCtx)((function(e){return[(0,r.createElementVNode)("p",{style:(0,r.normalizeStyle)("color: "+w.setColorForDate(e.date)+";")},(0,r.toDisplayString)(e.date.day),5)]})),_:1},8,["modelValue"])])])])]),(0,r.createElementVNode)("div",D,[(0,r.createElementVNode)("button",{onClick:t[3]||(t[3]=function(e){return w.cancel()}),type:"button",class:"text-white bg-rose-600 hover:bg-rose-700 font-medium rounded-lg text-sm px-5 py-2.5 text-center"}," Cancelar "),"register"==a.modalButtons?((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:0,onClick:t[4]||(t[4]=function(){return w.create&&w.create.apply(w,arguments)}),type:"button",id:"register",class:"text-white bg-green-600 hover:bg-green-700 font-medium rounded-lg text-sm px-5 py-2.5 text-center"}," Registrar ")):(0,r.createCommentVNode)("",!0),"edit"==a.modalButtons?((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:1,onClick:t[5]||(t[5]=function(){return w.update&&w.update.apply(w,arguments)}),type:"button",id:"edit",class:"text-white bg-yellow-400 hover:bg-yellow-500 font-medium rounded-lg text-sm px-5 py-2.5 text-center"}," Editar ")):(0,r.createCommentVNode)("",!0)])])])])])):(0,r.createCommentVNode)("",!0)}]])}}]);