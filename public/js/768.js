"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[768],{2768:(e,t,a)=>{a.r(t),a.d(t,{default:()=>$});var r=a(6598),s={key:0,class:"transition-opacity top-0 left-0 min-h-full min-w-full z-auto bg-black bg-opacity-40 absolute overflow-y-scroll"},o={class:"flex items-center justify-center min-h-screen"},l={class:"relative px-4 w-full max-w-2xl"},n={class:"relative bg-white rounded-lg shadow"},i={class:"flex justify-between items-start p-3 rounded-t border-b"},c={class:"text-xl font-semibold text-gray-900 lg:text-2xl"},d={class:"p-6 space-y-6"},m={class:"relative z-0 mb-6 w-full group"},u=(0,r.createElementVNode)("label",{for:"name",class:"absolute text-base text-gray-500 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-100 peer-focus:-translate-y-6"},"Nombre Empresa * ",-1),p={key:0,class:"absolute text-sm text-red-500 duration-300 transform"},h={class:"grid xl:grid-cols-2 xl:gap-6"},f={class:"relative z-0 mb-6 w-full group"},g=(0,r.createElementVNode)("label",{for:"nit",class:"absolute text-base text-gray-500 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"},"NIT *",-1),y={key:0,class:"absolute text-sm text-red-500 duration-300 transform"},b={class:"relative z-0 mb-6 w-full group"},v=(0,r.createElementVNode)("label",{class:"absolute text-base text-grey-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"},"Sigla *",-1),x={key:0,class:"absolute text-sm text-red-500 duration-300 transform"},E={class:"grid xl:grid-cols-2 xl:gap-6"},k={class:"relative z-0 mb-6 w-full group"},N=(0,r.createElementVNode)("label",{for:"email",class:"absolute text-base text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"},"Correo",-1),w={key:0,class:"absolute text-sm text-red-500 duration-300 transform"},C={class:"relative z-0 mb-6 w-full group"},V=["disabled"],D=["value"],B=(0,r.createElementVNode)("label",{for:"selectCoin",class:"absolute text-base text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"},"Moneda *",-1),S={class:"grid xl:grid-cols-2 xl:gap-6"},z={class:"relative z-0 mb-6 w-full group"},_=(0,r.createElementVNode)("label",{for:"phone",class:"absolute text-base text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"},"Teléfono",-1),M={key:0,class:"absolute text-sm text-red-500 duration-300 transform"},A={class:"relative z-0 mb-6 w-full group"},I=["value","selected"],L=(0,r.createElementVNode)("label",{for:"levelSelect",class:"absolute text-base text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"},"Nivel *",-1),T={class:"relative z-0 w-full group"},P=(0,r.createElementVNode)("label",{for:"address",class:"block mt-3 mb-2 text-base font-medium text-gray-900 dark:text-gray-400"},"Dirección",-1),U={key:0,class:"absolute text-sm text-red-500 duration-300 transform"},j={class:"flex items-center p-3 space-x-2 rounded-b border-t"};var F=a(9669),O=a.n(F),Z=a(1678);const q={directives:{tooltip:a(7915).Z,focus},emits:{"update-data":"updateData"},props:{side:{type:String,default:"bottom"},tooltipText:{type:String,default:"A tooltip"},btnClass:{type:String,default:"text-white bg-amber-400 hover:bg-amber-500 font-medium rounded-lg text-sm px-4 py-2.5 text-center mr-2"},btnContent:{type:String,default:"Agregar"},inputClass:{type:String,default:"block py-2.5 px-0 w-full text-lg text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none focus:outline-none focus:ring-0 focus:border-blue-600 peer"},modalTitle:String,modalButtons:String,companyData:{type:Object,default:{id_company:"",name:"",nit:"",initials:"",email:"",phone:"",level:3,address:""}}},data:function(){return{id_company:this.companyData.id_company,name:this.companyData.name,nit:this.companyData.nit,initials:this.companyData.initials,email:this.companyData.email,phone:this.companyData.phone,level:this.companyData.level,address:this.companyData.address,success:!1,errorInitials:!1,errorEmail:!1,errorPhone:!1,errorName:!1,errorNit:!1,errorAddress:!1,messageErrorName:"",messageErrorNit:"",messageErrorInitials:"",messageErrorEmail:"",messageErrorPhone:"",messageErrorAddress:"",showModal:!1,coins:[],selectedCoin:2,disabledCoin:!1}},watch:{showModal:{handler:function(e){e&&(this.getCoins(),this.setCoinOnUpdate())}},companyData:{handler:function(){this.id_company=this.companyData.id_company,this.name=this.companyData.name,this.nit=this.companyData.nit,this.initials=this.companyData.initials,this.email=this.companyData.email,this.phone=this.companyData.phone,this.level=this.companyData.level,this.address=this.companyData.address,this.errorInitials=!1,this.errorEmail=!1,this.errorPhone=!1,this.errorName=!1,this.errorNit=!1,this.errorAddress=!1,this.messageErrorName="",this.messageErrorNit="",this.messageErrorInitials="",this.messageErrorEmail="",this.messageErrorPhone="",this.messageErrorAddress=""}}},methods:{setCoinOnUpdate:function(){var e=this;""!=this.companyData.id_company&&O().post(route("coincompany.api.getByCompanyId"),{id_company:this.companyData.id_company}).then((function(t){(null==t?void 0:t.data.coins.length)>1&&(e.disabledCoin=!0);var a=document.getElementById("selectCoin"),r=t.data.coins.find((function(e){return 1==e.active}));a.value=r.id_maincoin,e.selectedCoin=r.id_maincoin}))},getCoins:function(){var e=this;O().get(route("coins.api.read")).then((function(t){e.coins=t.data.coins,e.coins=e.coins.map((function(e){return{value:e.id_coin,text:e.name}}))})).catch((function(e){console.log(e)}))},flushErrors:function(){this.errorName=!1,this.messageErrorName="",this.errorNit=!1,this.messageErrorNit="",this.errorInitials=!1,this.messageErrorInitials="",this.errorEmail=!1,this.messageErrorEmail="",this.errorPhone=!1,this.messageErrorPhone="",this.errorAddress=!1,this.messageErrorAddress=""},cancelCreate:function(){this.blankErrors(),this.blankFields()},cancelEdit:function(){this.disabledCoin=!1,this.blankErrors(),this.id_company=this.companyData.id_company,this.name=this.companyData.name,this.nit=this.companyData.nit,this.initials=this.companyData.initials,this.email=this.companyData.email,this.phone=this.companyData.phone,this.level=this.companyData.level,this.address=this.companyData.address},blankFields:function(){this.id_company="",this.name="",this.nit="",this.initials="",this.email="",this.phone="",this.level="3",this.address=""},blankErrors:function(){this.showModal=!1,this.errorName=!1,this.errorNit=!1,this.errorInitials=!1,this.errorEmail=!1,this.errorAddress=!1,this.errorPhone=!1},removeEmptyValues:function(e){var t=e;for(var a in t)""!=t[a]&&null!=t[a]||delete t[a];return t},setErrors:function(e){for(var t in e)"name"==t&&(this.errorName=!0,this.messageErrorName=e[t][0]),"nit"==t&&(this.errorNit=!0,this.messageErrorNit=e[t][0]),"initials"==t&&(this.errorInitials=!0,this.messageErrorInitials=e[t][0]),"email"==t&&(this.errorEmail=!0,this.messageErrorEmail=e[t][0]),"phone"==t&&(this.errorPhone=!0,this.messageErrorPhone=e[t][0]),"address"==t&&(this.errorAddress=!0,this.messageErrorAddress=e[t][0])},create:function(){var e=this,t={name:this.name,nit:this.nit?this.nit.toString():null,initials:this.initials,email:this.email,phone:this.phone?this.phone.toString():null,level:this.level,address:this.address,id_coin:this.selectedCoin};t=this.removeEmptyValues(t),O().post(route("companies.api.create"),t).catch((function(t){e.flushErrors(),e.setErrors(t.response.data.errors)})).then((function(t){var a;null!=t&&null!==(a=t.data)&&void 0!==a&&a.success&&(Z.Notify.success("Empresa creada con éxito"),e.showModal=!1,e.$emit("update-data"),e.cancelCreate(),e.level="3")}))},update:function(){var e=this,t={id_company:this.id_company,name:this.name,nit:this.nit?this.nit.toString():null,initials:this.initials,email:this.email,phone:this.phone?this.phone.toString():null,level:this.level,address:this.address,id_coin:this.selectedCoin};t=this.removeEmptyValues(t),O().post(route("companies.api.update"),t).catch((function(t){e.flushErrors(),e.setErrors(t.response.data.errors)})).then((function(t){try{t.data.success&&(Z.Notify.success("Se ha actualizado la empresa"),e.$emit("update-data",e.name,e.id_company),e.showModal=!1)}catch(e){console.log("No se pudo completar la petición")}}))}}};const $=(0,a(3744).Z)(q,[["render",function(e,t,a,F,O,Z){var q=(0,r.resolveDirective)("tooltip"),$=(0,r.resolveDirective)("focus");return(0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,null,[(0,r.withDirectives)(((0,r.openBlock)(),(0,r.createElementBlock)("button",{class:(0,r.normalizeClass)([a.btnClass,"ml-2"]),type:"button",onClick:t[0]||(t[0]=function(e){return O.showModal=!0}),onClose:t[1]||(t[1]=function(e){return O.showModal=!1})},[(0,r.renderSlot)(e.$slots,"default")],34)),[[q,{value:a.tooltipText,class:"text-center"},void 0,{bottom:!0}]]),O.showModal?((0,r.openBlock)(),(0,r.createElementBlock)("div",s,[(0,r.createElementVNode)("div",o,[(0,r.createElementVNode)("div",l,[(0,r.createElementVNode)("div",n,[(0,r.createElementVNode)("div",i,[(0,r.createElementVNode)("h3",c,(0,r.toDisplayString)(a.modalTitle)+" "+(0,r.toDisplayString)(O.name),1)]),(0,r.createElementVNode)("div",d,[(0,r.createElementVNode)("form",null,[(0,r.createElementVNode)("div",m,[(0,r.withDirectives)((0,r.createElementVNode)("input",{autocomplete:"off",type:"text",name:"name",id:"name",class:(0,r.normalizeClass)(a.inputClass),oninput:"javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);",onkeypress:"return /[A-Z 0-9´]/i.test(event.key)",maxlength:"50",placeholder:" ","onUpdate:modelValue":t[2]||(t[2]=function(e){return O.name=e}),required:""},null,2),[[$],[r.vModelText,O.name]]),u,O.errorName?((0,r.openBlock)(),(0,r.createElementBlock)("label",p,(0,r.toDisplayString)(O.messageErrorName),1)):(0,r.createCommentVNode)("",!0)]),(0,r.createElementVNode)("div",h,[(0,r.createElementVNode)("div",f,[(0,r.withDirectives)((0,r.createElementVNode)("input",{autocomplete:"off",type:"text",name:"nit",id:"nit",class:(0,r.normalizeClass)(a.inputClass),oninput:"javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);",onkeypress:"return /[0-9]/i.test(event.key)",maxlength:"20",placeholder:" ","onUpdate:modelValue":t[3]||(t[3]=function(e){return O.nit=e}),required:""},null,2),[[r.vModelText,O.nit]]),g,O.errorNit?((0,r.openBlock)(),(0,r.createElementBlock)("label",y,(0,r.toDisplayString)(O.messageErrorNit),1)):(0,r.createCommentVNode)("",!0)]),(0,r.createElementVNode)("div",b,[(0,r.withDirectives)((0,r.createElementVNode)("input",{autocomplete:"off",type:"text",oninput:"javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);",onkeypress:"return /[A-Z 0-9]/i.test(event.key)",maxlength:"15",class:(0,r.normalizeClass)(a.inputClass),placeholder:" ","onUpdate:modelValue":t[4]||(t[4]=function(e){return O.initials=e}),required:""},null,2),[[r.vModelText,O.initials]]),v,O.errorInitials?((0,r.openBlock)(),(0,r.createElementBlock)("label",x,(0,r.toDisplayString)(O.messageErrorInitials),1)):(0,r.createCommentVNode)("",!0)])]),(0,r.createElementVNode)("div",E,[(0,r.createElementVNode)("div",k,[(0,r.withDirectives)((0,r.createElementVNode)("input",{autocomplete:"off",type:"email",name:"email",class:(0,r.normalizeClass)(a.inputClass),placeholder:" ","onUpdate:modelValue":t[5]||(t[5]=function(e){return O.email=e})},null,2),[[r.vModelText,O.email]]),N,O.errorEmail?((0,r.openBlock)(),(0,r.createElementBlock)("label",w,(0,r.toDisplayString)(O.messageErrorEmail),1)):(0,r.createCommentVNode)("",!0)]),(0,r.createElementVNode)("div",C,[(0,r.withDirectives)((0,r.createElementVNode)("select",{id:"selectCoin",name:"selectCoin",disabled:O.disabledCoin,class:(0,r.normalizeClass)(a.inputClass),"onUpdate:modelValue":t[6]||(t[6]=function(e){return O.selectedCoin=e})},[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(O.coins,(function(e,t){return(0,r.openBlock)(),(0,r.createElementBlock)("option",{key:t,value:e.value},(0,r.toDisplayString)(e.text),9,D)})),128))],10,V),[[r.vModelSelect,O.selectedCoin]]),B])]),(0,r.createElementVNode)("div",S,[(0,r.createElementVNode)("div",z,[(0,r.withDirectives)((0,r.createElementVNode)("input",{autocomplete:"off",type:"text",name:"phone",id:"phone",oninput:"javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);",onkeypress:"return /[0-9]/i.test(event.key)",maxlength:"8",class:(0,r.normalizeClass)(a.inputClass),"onUpdate:modelValue":t[7]||(t[7]=function(e){return O.phone=e}),placeholder:" "},null,2),[[r.vModelText,O.phone]]),_,O.errorPhone?((0,r.openBlock)(),(0,r.createElementBlock)("label",M,(0,r.toDisplayString)(O.messageErrorPhone),1)):(0,r.createCommentVNode)("",!0)]),(0,r.createElementVNode)("div",A,[(0,r.withDirectives)((0,r.createElementVNode)("select",{name:"levelSelect",class:(0,r.normalizeClass)(a.inputClass),"onUpdate:modelValue":t[8]||(t[8]=function(e){return O.level=e})},[((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(5,(function(e,t){return(0,r.createElementVNode)("option",{key:t,value:e+2,selected:O.level==e+2},(0,r.toDisplayString)(e+2),9,I)})),64))],2),[[r.vModelSelect,O.level]]),L])]),(0,r.createElementVNode)("div",T,[P,(0,r.withDirectives)((0,r.createElementVNode)("textarea",{"onUpdate:modelValue":t[9]||(t[9]=function(e){return O.address=e}),id:"address",oninput:"javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);",maxlength:"250",rows:"3",class:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none resize-none",placeholder:"Ingresa una dirección (Opcional)"},null,512),[[r.vModelText,O.address]]),O.errorAddress?((0,r.openBlock)(),(0,r.createElementBlock)("label",U,(0,r.toDisplayString)(O.messageErrorAddress),1)):(0,r.createCommentVNode)("",!0)])])]),(0,r.createElementVNode)("div",j,[(0,r.createElementVNode)("button",{onClick:t[10]||(t[10]=function(e){return["register"==a.modalButtons?Z.cancelCreate():Z.cancelEdit()]}),type:"button",class:"text-white bg-red-600 hover:bg-red-700 font-medium rounded-lg text-sm px-5 py-2.5 text-center"}," Cancelar "),"register"==a.modalButtons?((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:0,onClick:t[11]||(t[11]=function(){return Z.create&&Z.create.apply(Z,arguments)}),type:"button",class:"text-white bg-green-600 hover:bg-green-700 font-medium rounded-lg text-sm px-5 py-2.5 text-center"}," Registrar ")):(0,r.createCommentVNode)("",!0),"edit"==a.modalButtons?((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:1,onClick:t[12]||(t[12]=function(){return Z.update&&Z.update.apply(Z,arguments)}),type:"button",class:"text-white bg-yellow-400 hover:bg-yellow-500 font-medium rounded-lg text-sm px-5 py-2.5 text-center"}," Editar ")):(0,r.createCommentVNode)("",!0)])])])])])):(0,r.createCommentVNode)("",!0)],64)}]])}}]);