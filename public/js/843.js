"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[843],{4843:(e,t,a)=>{a.r(t),a.d(t,{default:()=>B});var r=a(6598),n={key:0,class:"transition-opacity top-0 left-0 min-h-full min-w-full z-auto bg-black bg-opacity-40 absolute overflow-y-scroll"},o={class:"flex items-center justify-center min-h-screen"},s={class:"relative px-4 w-full max-w-2xl h-full md:h-auto"},l={class:"relative bg-gray-800 rounded-lg shadow"},d={class:"flex justify-between items-start p-3 rounded-t border-b border-gray-500"},i={class:"text-xl font-semibold text-gray-300 lg:text-2xl"},c={class:"p-4 space-y-6"},m={class:"relative z-0 mb-5 w-full group"},u=(0,r.createElementVNode)("label",{for:"name",class:"absolute text-base text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-100 peer-focus:-translate-y-6"},"Nombre Gestión *",-1),p={class:"relative z-0 w-full group"},f=(0,r.createElementVNode)("label",{for:"address",class:"block mb-2 text-gray-400"},"Seleccione el rango de fechas: ",-1),g={class:"flex items-center mb-3"},h={class:"relative z-0 w-full group"},y=(0,r.createElementVNode)("span",{class:"mx-2 text-gray-400"},"Desde",-1),D={class:"relative z-0 w-full group"},v=(0,r.createElementVNode)("span",{class:"mx-2 text-gray-400"},"Hasta",-1),b={class:"flex items-center p-3 space-x-2 rounded-b border-t border-gray-500"};var E=a(9669),w=a.n(E),x=a(8223),N=a(5090),_=a(7484),Y=a.n(_),V=a(6607),k=a.n(V),M=a(285),C=a.n(M);Y().extend(k()),Y().extend(C());const S={directives:{focus:{mounted:function(e){return e.focus()}}},components:{Calendar:x.Z},props:{modalTitle:String,modalButtons:String,id_company:Number,allDates:Array,managementData:{type:Object,default:{id_management:"",id_user:"",id_company:"",status:"",start_date:"",end_date:"",name:""}},showModal:{type:Boolean,default:!1}},watch:{managementData:{handler:function(){this.newData=Object.assign({},this.managementData)}}},data:function(){return{newData:Object.assign({},this.managementData),dates:this.allDates,errorName:!1,messageErrorName:"",errorStart_date:!1,messageErrorStart_date:"",errorEnd_date:!1,messageErrorEnd_date:"",errorGeneric:!1,messageErrorGeneric:""}},methods:{flushErrors:function(){this.errorName=!1,this.messageErrorName="",this.errorStart_date=!1,this.messageErrorStart_date="",this.errorEnd_date=!1,this.messageErrorEnd_date="",this.errorGeneric=!1,this.messageErrorGeneric=""},cancel:function(){this.$emit("close"),this.newData=Object.assign({},this.managementData),this.flushErrors()},setColorForDate:function(e){for(var t=parseFloat(e.month)+parseFloat(1),a=Y()(e.day+"/"+t+"/"+e.year,"D/M/YYYY",!0),r="white",n=0;n<this.allDates.length;n++){var o=Y()(this.allDates[n].start_date,"DD/MM/YYYY",!0),s=Y()(this.allDates[n].end_date,"DD/MM/YYYY",!0);Y()(a).isBetween(o,s,null,"[]")&&(r="red",this.allDates[n].id_management==this.managementData.id_management&&(r="green"))}return r},removeEmptyValues:function(e){var t=e;for(var a in t)""!=t[a]&&null!=t[a]||delete t[a];return t},setErrors:function(e){for(var t in e)"name"==t&&e[t][0]&&(this.errorName=!0,N.Notify.failure(e[t][0])),"start_date"==t&&e[t][0]&&(this.errorStart_date=!0,N.Notify.failure(e[t][0])),"end_date"==t&&e[t][0]&&(this.errorEnd_date=!0,N.Notify.failure(e[t][0]))},create:function(){var e=this;console.log(this.newData);var t={name:this.newData.name,start_date:Y()(this.newData.start_date).format("YYYY-MM-DD"),end_date:Y()(this.newData.end_date).format("YYYY-MM-DD"),id_company:this.id_company.toString()};N.Notify.init({clickToClose:!0}),w().post(route("managementdate.api.create"),t).catch((function(t){var a,r;(e.flushErrors(),t.response.data.message)?1==t.response.data.type?N.Notify.failure(t.response.data.message):e.setErrors(null==t||null===(a=t.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.errors):1==t.response.data.type?N.Notify.failure("Error al crear"):(e.errorGeneric=!0,e.messageErrorGeneric=t.response.data.message)})).then((function(t){try{t.data.success&&(N.Notify.success("Gestión creada con éxito"),e.$emit("update-data"),e.cancel()),console.log(t)}catch(e){console.log("No se pudo completar la peticion")}}))},update:function(){var e=this;console.log(this.newData);var t={id_management:this.newData.id_management,name:this.newData.name,start_date:Y()(this.newData.start_date instanceof Date?this.newData.start_date.getTime():Y()(this.newData.start_date,"DD/MM/YYYY")).format("YYYY-MM-DD"),end_date:Y()(this.newData.end_date instanceof Date?this.newData.end_date.getTime():Y()(this.newData.end_date,"DD/MM/YYYY")).format("YYYY-MM-DD")};t=this.removeEmptyValues(t),N.Notify.init({clickToClose:!0}),w().post(route("managementdate.api.update"),t).catch((function(t){var a,r;(e.flushErrors(),t.response.data.message)?1==t.response.data.type?N.Notify.failure(t.response.data.message):e.setErrors(null==t||null===(a=t.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.errors):1==t.response.data.type?N.Notify.failure("Error al actualizar"):(e.errorGeneric=!0,e.messageErrorGeneric=t.response.data.message)})).then((function(t){try{t.data.success&&(N.Notify.success("Se ha actualizado la gestión"),e.$emit("update-data"),e.cancel())}catch(e){console.log("No se pudo completar la peticion")}}))}}};const B=(0,a(3744).Z)(S,[["render",function(e,t,a,E,w,x){var N=(0,r.resolveComponent)("Calendar"),_=(0,r.resolveDirective)("focus");return a.showModal?((0,r.openBlock)(),(0,r.createElementBlock)("div",n,[(0,r.createElementVNode)("div",o,[(0,r.createElementVNode)("div",s,[(0,r.createElementVNode)("div",l,[(0,r.createElementVNode)("div",d,[(0,r.createElementVNode)("h3",i,(0,r.toDisplayString)(a.modalTitle),1)]),(0,r.createElementVNode)("div",c,[(0,r.createElementVNode)("form",null,[(0,r.createElementVNode)("div",m,[(0,r.withDirectives)((0,r.createElementVNode)("input",{autocomplete:"off",type:"text",class:"block py-2.5 px-0 w-full text-xl text-gray-300 bg-transparent border-0 border-b-2 border-gray-300 appearance-none focus:outline-none focus:ring-0 focus:border-blue-600 peer",oninput:"javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);",onkeypress:"return /[A-Z 0-9]/i.test(event.key)",maxlength:"15","onUpdate:modelValue":t[0]||(t[0]=function(e){return w.newData.name=e}),placeholder:" ",required:""},null,512),[[_],[r.vModelText,w.newData.name]]),u]),(0,r.createElementVNode)("div",p,[f,(0,r.createElementVNode)("div",g,[(0,r.createElementVNode)("div",h,[y,(0,r.createVNode)(N,{modelValue:w.newData.start_date,"onUpdate:modelValue":t[1]||(t[1]=function(e){return w.newData.start_date=e}),dateFormat:"dd/mm/yy",baseZIndex:100},{date:(0,r.withCtx)((function(e){return[(0,r.createElementVNode)("p",{style:(0,r.normalizeStyle)("color: "+x.setColorForDate(e.date)+";")},(0,r.toDisplayString)(e.date.day),5)]})),_:1},8,["modelValue"])]),(0,r.createElementVNode)("div",D,[v,(0,r.createVNode)(N,{baseZIndex:100,modelValue:w.newData.end_date,"onUpdate:modelValue":t[2]||(t[2]=function(e){return w.newData.end_date=e}),dateFormat:"dd/mm/yy"},{date:(0,r.withCtx)((function(e){return[(0,r.createElementVNode)("p",{style:(0,r.normalizeStyle)("color: "+x.setColorForDate(e.date)+";")},(0,r.toDisplayString)(e.date.day),5)]})),_:1},8,["modelValue"])])])])])]),(0,r.createElementVNode)("div",b,[(0,r.createElementVNode)("button",{onClick:t[3]||(t[3]=function(e){return x.cancel()}),"data-modal-toggle":"modal-addmanagement",type:"button",class:"text-white bg-rose-600 hover:bg-rose-700 font-medium rounded-lg text-sm px-5 py-2.5 text-center"}," Cancelar "),"register"==a.modalButtons?((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:0,onClick:t[4]||(t[4]=function(){return x.create&&x.create.apply(x,arguments)}),"data-modal-toggle":"modal-addmanagement",type:"button",id:"register",class:"text-white bg-green-600 hover:bg-green-700 font-medium rounded-lg text-sm px-5 py-2.5 text-center"}," Registrar ")):(0,r.createCommentVNode)("",!0),"edit"==a.modalButtons?((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:1,onClick:t[5]||(t[5]=function(){return x.update&&x.update.apply(x,arguments)}),type:"button",id:"edit",class:"text-white bg-yellow-400 hover:bg-yellow-500 font-medium rounded-lg text-sm px-5 py-2.5 text-center"}," Editar ")):(0,r.createCommentVNode)("",!0)])])])])])):(0,r.createCommentVNode)("",!0)}]])}}]);